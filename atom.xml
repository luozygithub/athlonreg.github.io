<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>chentj&#39;s Blog</title>
  
  <subtitle>Inflexible thinking, bad humor</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="https://tianjiec.top/"/>
  <updated>2018-12-20T12:43:12.164Z</updated>
  <id>https://tianjiec.top/</id>
  
  <author>
    <name>chentj</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>soket</title>
    <link href="https://tianjiec.top/2018/12/20/soket/"/>
    <id>https://tianjiec.top/2018/12/20/soket/</id>
    <published>2018-12-20T12:35:54.000Z</published>
    <updated>2018-12-20T12:43:12.164Z</updated>
    
    <content type="html"><![CDATA[<h2 id="åŒæ­¥å’Œå¼‚æ­¥"><a href="#åŒæ­¥å’Œå¼‚æ­¥" class="headerlink" title="åŒæ­¥å’Œå¼‚æ­¥"></a>åŒæ­¥å’Œå¼‚æ­¥</h2><p>å½“å‰ç¨‹åºæ‰§è¡Œï¼š</p><p>åŒæ­¥ï¼šé˜»å¡ï¼Œå½“å‰ç¨‹åºæ˜¯å¦èƒ½å¤Ÿå»æ‰§è¡Œï¼Œå¿…é¡»ç­‰å‰ä¸€ä¸ªç¨‹åºæ‰§è¡Œå®Œæ¯•ä¹‹åï¼Œæ‰èƒ½å¤Ÿå»æ‰§è¡Œã€‚</p><p>å¼‚æ­¥ï¼šéé˜»å¡ï¼Œå½“å‰ç¨‹åºçš„æ‰§è¡Œï¼Œå¹¶ä¸å—å‰ä¸€ä¸ªç¨‹åºæ˜¯å¦æ‰§è¡Œå®Œæ¯•çš„å½±å“ã€‚</p><p>å¤šä¸ªç¨‹åºä¹‹é—´çš„å…³ç³» ï¼ˆä¸²è¡Œ/å¹¶è¡Œï¼‰</p><p>å¹¶è¡Œï¼š å¤šä¸ªç¨‹åºä¹‹é—´å¯ä»¥åŒæ—¶æˆ–è€…ä¸åŒæ—¶å»æ‰§è¡Œï¼Œå«åšå¹¶è¡Œ</p><p>ä¸²è¡Œï¼š å¤šä¸ªç¨‹åºä¹‹é—´å¿…é¡»æŒ‰ç…§é¡ºåºå»æ‰§è¡Œï¼Œè¿™å«ä¸²è¡Œã€‚</p><p>1ã€åŒæ­¥æ‰§è¡Œçš„ç¨‹åºï¼Œå¿…ç„¶æ˜¯ä¸²è¡Œçš„</p><p>2ã€å¼‚æ­¥æ‰§è¡Œçš„ç¨‹åºï¼Œå¯ä»¥å®ç°ä¸²è¡Œ</p><p>3ã€å¹¶è¡Œçš„ç¨‹åºå¿…ç„¶æ˜¯å¼‚æ­¥æ‰§è¡Œ</p><p>å¥—æ¥å­—ï¼š</p><p>ä¸Šä¼ è§†é¢‘ ï¼š è§†é¢‘ =&gt; äºŒè¿›åˆ¶ =&gt; åˆ†å—ï¼ˆç¼–ç ï¼‰ + ipï¼šport=&gt; ä¼ è¾“ =&gt; ç»„è£…</p><p>SOCKET</p><p>ç½‘ç»œä¸Šä¸¤ä¸ªç¨‹åºé€šè¿‡ä¸€ä¸ªåŒå‘çš„é€šä¿¡è¿æ¥å®ç°æ•°æ®çš„äº¤æ¢ï¼Œè¿™ä¸ªè¿æ¥çš„ä¸€ç«¯ç§°ä¸ºä¸€ä¸ªsocketã€‚</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="file:///C:/Users/ç½—ä¸­è¿/AppData/Local/Packages/Microsoft.Office.OneNote_8wekyb3d8bbwe/TempState/msohtmlclip/clip_image001.png" alt="image" title="">                </div>                <div class="image-caption">image</div>            </figure><h4 id="é€šä¿¡æµç¨‹"><a href="#é€šä¿¡æµç¨‹" class="headerlink" title="é€šä¿¡æµç¨‹"></a>é€šä¿¡æµç¨‹</h4><table><thead><tr><th>åˆ›å»ºç”¨æ¥æ¥æ”¶æ•°æ®å’Œå¹¿æ’­æ•°æ®çš„ æœåŠ¡å™¨ï¼š</th><th></th></tr></thead><tbody><tr><td>åˆ›å»ºsocket</td><td>socketï¼ˆï¼‰</td></tr><tr><td>ç»‘å®šsoketå’Œç«¯å£å·</td><td>bindï¼ˆï¼‰</td></tr><tr><td>ç›‘å¬ç«¯å£å·</td><td>listenï¼ˆï¼‰</td></tr><tr><td>æ¥å—ä¿¡æ¯</td><td>acceptï¼ˆï¼‰</td></tr><tr><td>ä»socketä¸­è¯»å–å­—ç¬¦</td><td>recvï¼ˆï¼‰</td></tr><tr><td>å…³é—­socket</td><td>closeï¼ˆï¼‰</td></tr></tbody></table>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;åŒæ­¥å’Œå¼‚æ­¥&quot;&gt;&lt;a href=&quot;#åŒæ­¥å’Œå¼‚æ­¥&quot; class=&quot;headerlink&quot; title=&quot;åŒæ­¥å’Œå¼‚æ­¥&quot;&gt;&lt;/a&gt;åŒæ­¥å’Œå¼‚æ­¥&lt;/h2&gt;&lt;p&gt;å½“å‰ç¨‹åºæ‰§è¡Œï¼š&lt;/p&gt;
&lt;p&gt;åŒæ­¥ï¼šé˜»å¡ï¼Œå½“å‰ç¨‹åºæ˜¯å¦èƒ½å¤Ÿå»æ‰§è¡Œï¼Œå¿…é¡»ç­‰å‰ä¸€ä¸ªç¨‹åºæ‰§è¡Œå®Œæ¯•ä¹‹åï¼Œæ‰èƒ½å¤Ÿå»æ‰§è¡Œã€‚&lt;/p
      
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>5-1Node.jsç¼–å†™</title>
    <link href="https://tianjiec.top/2018/12/20/5-1Node-js%E7%BC%96%E5%86%99/"/>
    <id>https://tianjiec.top/2018/12/20/5-1Node-jsç¼–å†™/</id>
    <published>2018-12-20T09:17:09.000Z</published>
    <updated>2018-12-20T09:18:20.569Z</updated>
    
    <content type="html"><![CDATA[<h2 id="å­¦å‰éœ€æ±‚"><a href="#å­¦å‰éœ€æ±‚" class="headerlink" title="å­¦å‰éœ€æ±‚"></a>å­¦å‰éœ€æ±‚</h2><blockquote><h3 id="ä¸€ã€nodeå®‰è£…å’Œè¿è¡Œ"><a href="#ä¸€ã€nodeå®‰è£…å’Œè¿è¡Œ" class="headerlink" title="ä¸€ã€nodeå®‰è£…å’Œè¿è¡Œ"></a>ä¸€ã€nodeå®‰è£…å’Œè¿è¡Œ</h3></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ä¼šå®‰è£…nodeï¼Œæ­å»ºnodeç¯å¢ƒ</span><br><span class="line">ä¼šè¿è¡Œnodeæ‰§è¡Œnodeç¨‹åº</span><br></pre></td></tr></table></figure><blockquote><h3 id="äºŒã€nodeåŸºç¡€æ¨¡å—çš„ä½¿ç”¨"><a href="#äºŒã€nodeåŸºç¡€æ¨¡å—çš„ä½¿ç”¨" class="headerlink" title="äºŒã€nodeåŸºç¡€æ¨¡å—çš„ä½¿ç”¨"></a>äºŒã€nodeåŸºç¡€æ¨¡å—çš„ä½¿ç”¨</h3></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Bufferï¼šäºŒè¿›åˆ¶æ•°æ®å¤„ç†æ¨¡å—</span><br><span class="line">Eventsï¼šäº‹ä»¶æ¨¡å—</span><br><span class="line">fsï¼šæ–‡ä»¶ç³»ç»Ÿæ¨¡å—</span><br><span class="line">Netï¼šç½‘ç»œæ¨¡å—</span><br><span class="line">Httpï¼šhttpæ¨¡å—</span><br></pre></td></tr></table></figure><blockquote><p><a href="https://nodejs.org/api/" target="_blank" rel="noopener">https://nodejs.org/api/</a></p></blockquote><h2 id="å‰å°ç®¡ç†åŠŸèƒ½"><a href="#å‰å°ç®¡ç†åŠŸèƒ½" class="headerlink" title="å‰å°ç®¡ç†åŠŸèƒ½"></a>å‰å°ç®¡ç†åŠŸèƒ½</h2><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="http://m.qpic.cn/psb?/V13wE8sQ0FBtUy/BUkKRSYer6YG8srS1RteyV39UGe04Zi8kcWL7bwoQas!/b/dGYBAAAAAAAA&bo=cgF6AQAAAAADByo!&rf=viewer_4" alt="image" title="">                </div>                <div class="image-caption">image</div>            </figure><h2 id="åå°é¡µé¢"><a href="#åå°é¡µé¢" class="headerlink" title="åå°é¡µé¢"></a>åå°é¡µé¢</h2><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="http://m.qpic.cn/psb?/V13wE8sQ0FBtUy/R660H48.QMim2kKOUN.K5Pkfhpdcpu2cfnZmsIuDq.k!/b/dDEBAAAAAAAA&bo=KAKqAwAAAAADB6E!&rf=viewer_4" alt="image" title="">                </div>                <div class="image-caption">image</div>            </figure><blockquote><h3 id="ä¸‰ã€æŠ€æœ¯æ¡†æ¶ä»‹ç»"><a href="#ä¸‰ã€æŠ€æœ¯æ¡†æ¶ä»‹ç»" class="headerlink" title="ä¸‰ã€æŠ€æœ¯æ¡†æ¶ä»‹ç»"></a>ä¸‰ã€æŠ€æœ¯æ¡†æ¶ä»‹ç»</h3><p>NodeJSã€Expressã€Mongodb</p><h3 id="å››ã€ç¬¬ä¸‰æ–¹æ¨¡å—-amp-ä¸­é—´ä»¶"><a href="#å››ã€ç¬¬ä¸‰æ–¹æ¨¡å—-amp-ä¸­é—´ä»¶" class="headerlink" title="å››ã€ç¬¬ä¸‰æ–¹æ¨¡å—&amp;ä¸­é—´ä»¶"></a>å››ã€ç¬¬ä¸‰æ–¹æ¨¡å—&amp;ä¸­é—´ä»¶</h3></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">body-parser:è§£æpostè¯·æ±‚æ•°æ®</span><br><span class="line">cookies:è¯»/å†™cookie</span><br><span class="line">swig:æ¨¡æ¿è§£æå¼•æ“</span><br><span class="line">mongoose:æ“ä½œmongodbæ•°æ®</span><br><span class="line">markdown:markdownè¯­æ³•è§£æç”Ÿæˆæ¨¡å—</span><br></pre></td></tr></table></figure><blockquote><h3 id="äº”ã€é¡¹ç›®åˆå§‹åŒ–"><a href="#äº”ã€é¡¹ç›®åˆå§‹åŒ–" class="headerlink" title="äº”ã€é¡¹ç›®åˆå§‹åŒ–"></a>äº”ã€é¡¹ç›®åˆå§‹åŒ–</h3></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm init</span><br></pre></td></tr></table></figure><blockquote><h3 id="å…­ã€ä¾èµ–æ¨¡å—å®‰è£…ï¼ˆè¦è”ç½‘ã€è¦è”ç½‘ã€è¦è”ç½‘ï¼‰"><a href="#å…­ã€ä¾èµ–æ¨¡å—å®‰è£…ï¼ˆè¦è”ç½‘ã€è¦è”ç½‘ã€è¦è”ç½‘ï¼‰" class="headerlink" title="å…­ã€ä¾èµ–æ¨¡å—å®‰è£…ï¼ˆè¦è”ç½‘ã€è¦è”ç½‘ã€è¦è”ç½‘ï¼‰"></a>å…­ã€ä¾èµ–æ¨¡å—å®‰è£…ï¼ˆè¦è”ç½‘ã€è¦è”ç½‘ã€è¦è”ç½‘ï¼‰</h3></blockquote><h2 id="åº”ç”¨åˆ›å»º"><a href="#åº”ç”¨åˆ›å»º" class="headerlink" title="åº”ç”¨åˆ›å»º"></a>åº”ç”¨åˆ›å»º</h2><blockquote><h3 id="å‡†å¤‡ï¼šç›®å½•ç»“æ„"><a href="#å‡†å¤‡ï¼šç›®å½•ç»“æ„" class="headerlink" title="å‡†å¤‡ï¼šç›®å½•ç»“æ„"></a>å‡†å¤‡ï¼šç›®å½•ç»“æ„</h3></blockquote><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="http://m.qpic.cn/psb?/V13wE8sQ0FBtUy/KEvmeky95HuJ4YaPSjoF5hjfAx9M9Q3bz6WsqtErtqQ!/b/dFYBAAAAAAAA&bo=xgKcAQAAAAADB3s!&rf=viewer_4" alt="image" title="">                </div>                <div class="image-caption">image</div>            </figure><blockquote><h3 id="ä¸€ã€åˆ›å»ºåº”ç”¨ã€ç›‘å¬ç«¯å£-app-jsä¸­"><a href="#ä¸€ã€åˆ›å»ºåº”ç”¨ã€ç›‘å¬ç«¯å£-app-jsä¸­" class="headerlink" title="ä¸€ã€åˆ›å»ºåº”ç”¨ã€ç›‘å¬ç«¯å£(app.jsä¸­)"></a>ä¸€ã€åˆ›å»ºåº”ç”¨ã€ç›‘å¬ç«¯å£(app.jsä¸­)</h3></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">//åŠ è½½expressæ¨¡å—</span><br><span class="line">var express = require(&quot;express&quot;);</span><br><span class="line">//åˆ›å»ºappåº”ç”¨  =&gt; NodeJS Http.createServer();</span><br><span class="line">var app = express();</span><br><span class="line"></span><br><span class="line">//ç›‘å¬httpè¯·æ±‚</span><br><span class="line">app.listen(8081);</span><br></pre></td></tr></table></figure><blockquote><h3 id="äºŒã€ç”¨æˆ·çš„è®¿é—®"><a href="#äºŒã€ç”¨æˆ·çš„è®¿é—®" class="headerlink" title="äºŒã€ç”¨æˆ·çš„è®¿é—®"></a>äºŒã€ç”¨æˆ·çš„è®¿é—®</h3><p>(1)ç”¨æˆ·é€šè¿‡URLè®¿é—®webåº”ç”¨ï¼Œå¦‚ http:localhost:8081/<br>(2)webåç«¯æ ¹æ®ç”¨æˆ·è®¿é—®çš„URLå¤„ç†ä¸åŒçš„ä¸šåŠ¡é€»è¾‘</p><h3 id="ä¸‰ã€å¤„ç†è¯·æ±‚è¾“å‡º"><a href="#ä¸‰ã€å¤„ç†è¯·æ±‚è¾“å‡º" class="headerlink" title="ä¸‰ã€å¤„ç†è¯·æ±‚è¾“å‡º"></a>ä¸‰ã€å¤„ç†è¯·æ±‚è¾“å‡º</h3><p>(1)è·¯ç”±ç»‘å®šï¼š<br>é€šè¿‡app.get()æˆ–è€…app.post()ç­‰æ–¹æ³•å¯ä»¥æŠŠä¸€ä¸ªurlè·¯å¾„å’Œä¸€ä¸ªæˆ–Nä¸ªå‡½æ•°è¿›è¡Œç»‘å®šã€‚<br>app.get(â€œ/â€œ, function(req, res, next){}) reqï¼šrequestå¯¹è±¡ - ä¿å­˜å®¢æˆ·ç«¯è¯·æ±‚çš„ä¸€ä¸ªæ•°æ® http.request<br>resï¼šresponseå¯¹è±¡ - æœåŠ¡ç«¯è¾“å‡ºå¯¹è±¡ï¼Œæä¾›äº†ä¸€äº›æœåŠ¡å™¨ç«¯è¾“å‡ºç›¸å…³çš„ä¸€äº›æ–¹æ³• - http.response<br>nextï¼šæ–¹æ³•ï¼Œç”¨äºæ‰§è¡Œä¸‹ä¸€ä¸ªå’Œè·¯å¾„åŒ¹é…çš„å‡½æ•°</p><h3 id="å››ã€å†…å®¹è¾“å‡º"><a href="#å››ã€å†…å®¹è¾“å‡º" class="headerlink" title="å››ã€å†…å®¹è¾“å‡º"></a>å››ã€å†…å®¹è¾“å‡º</h3><p>é€šè¿‡res.send(string)å‘é€å†…å®¹åˆ°å®¢æˆ·ç«¯</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">//åŠ è½½expressæ¨¡å—</span><br><span class="line">var express = require(&quot;express&quot;);</span><br><span class="line">//åˆ›å»ºappåº”ç”¨  =&gt; NodeJS Http.createServer();</span><br><span class="line">var app = express();</span><br><span class="line"></span><br><span class="line">/*</span><br><span class="line">é¦–é¡µ</span><br><span class="line">ç›‘å¬åˆ°è¾“å…¥è·¯å¾„/ï¼Œå¤„ç†çš„æ“ä½œ</span><br><span class="line">*/</span><br><span class="line">app.get(&quot;/&quot;, function(req, res, next)&#123;</span><br><span class="line">res.send(&quot;&lt;h1&gt;æ¬¢è¿å…‰ä¸´æˆ‘çš„åšå®¢!&lt;/h1&gt;&quot;);</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">//ç›‘å¬httpè¯·æ±‚</span><br><span class="line">app.listen(8081);</span><br></pre></td></tr></table></figure><blockquote><h3 id="äº”ã€ä½¿ç”¨æ¨¡æ¿"><a href="#äº”ã€ä½¿ç”¨æ¨¡æ¿" class="headerlink" title="äº”ã€ä½¿ç”¨æ¨¡æ¿"></a>äº”ã€ä½¿ç”¨æ¨¡æ¿</h3><p>ï¼ˆ1ï¼‰æ¨¡æ¿çš„ä½¿ç”¨<br>åç«¯é€»è¾‘å’Œé¡µé¢è¡¨ç°åˆ†ç¦» - å‰åç«¯åˆ†ç¦»<br>ï¼ˆ2ï¼‰æ¨¡æ¿çš„é…ç½®</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line">//åŠ è½½expressæ¨¡å—</span><br><span class="line">var express = require(&quot;express&quot;);</span><br><span class="line">//åŠ è½½æ¨¡æ¿å¤„ç†å‰åç«¯</span><br><span class="line">var swig = require(&quot;swig&quot;);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">//åˆ›å»ºappåº”ç”¨  =&gt; NodeJS Http.createServer();</span><br><span class="line">var app = express();</span><br><span class="line"></span><br><span class="line">//é…ç½®åº”ç”¨æ¨¡æ¿</span><br><span class="line">/*</span><br><span class="line">å®šä¹‰å½“å‰åº”ç”¨æ‰€ä½¿ç”¨çš„æ¨¡æ¿å¼•æ“,ä½¿ç”¨swig.renderFileæ–¹æ³•è§£æåç¼€ä¸ºhtmlçš„æ–‡ä»¶</span><br><span class="line">ç¬¬ä¸€ä¸ªå‚æ•°ï¼šæ¨¡æ¿å¼•æ“çš„åç§°ï¼ŒåŒæ—¶ä¹Ÿæ˜¯æ¨¡æ¿æ–‡ä»¶çš„åç¼€</span><br><span class="line">ç¬¬äºŒä¸ªå‚æ•°ï¼šè¡¨ç¤ºç”¨äºè§£æå¤„ç†æ¨¡æ¿å†…å®¹çš„æ–¹æ³•</span><br><span class="line">*/</span><br><span class="line">app.engine(&quot;html&quot;, swig.renderFile);</span><br><span class="line">/*</span><br><span class="line">è®¾ç½®æ¨¡æ¿æ–‡ä»¶å­˜æ”¾çš„ç›®å½•</span><br><span class="line">ç¬¬ä¸€ä¸ªå‚æ•°å¿…é¡»æ˜¯views</span><br><span class="line">ç¬¬äºŒä¸ªå‚æ•°æ˜¯ç›®å½•</span><br><span class="line">*/</span><br><span class="line">app.set(&quot;views&quot;, &quot;./views&quot;);</span><br><span class="line">/*</span><br><span class="line">æ³¨å†Œæ‰€ä½¿ç”¨çš„æ¨¡æ¿å¼•æ“</span><br><span class="line">ç¬¬ä¸€ä¸ªå‚æ•°ï¼šä¸èƒ½æ”¹å¿…é¡»æ˜¯view engine</span><br><span class="line">ç¬¬äºŒä¸ªå‚æ•°ï¼šå’Œapp.engineè¿™ä¸ªæ–¹æ³•ä¸­å®šä¹‰çš„æ¨¡æ¿å¼•æ“çš„åç§°ï¼ˆç¬¬ä¸€ä¸ªå‚æ•°ï¼‰æ˜¯ä¸€è‡´çš„</span><br><span class="line">*/</span><br><span class="line">app.set(&quot;view engine&quot;, &quot;html&quot;);</span><br><span class="line">/*</span><br><span class="line">ã€æ³¨ã€‘è¿™é‡Œæ³¨æ„ï¼Œåœ¨å¼€å‘è¿‡ç¨‹ä¸­ï¼Œéœ€è¦å–æ¶ˆæ¨¡æ¿ç¼“å­˜</span><br><span class="line">*/</span><br><span class="line">swig.setDefaults(&#123;cache: false&#125;);</span><br><span class="line"></span><br><span class="line">/*</span><br><span class="line">é¦–é¡µ</span><br><span class="line">ç›‘å¬åˆ°è¾“å…¥è·¯å¾„/ï¼Œå¤„ç†çš„æ“ä½œ</span><br><span class="line">*/</span><br><span class="line">app.get(&quot;/&quot;, function(req, res, next)&#123;</span><br><span class="line">// res.send(&quot;&lt;h1&gt;æ¬¢è¿å…‰ä¸´æˆ‘çš„åšå®¢!&lt;/h1&gt;&quot;);</span><br><span class="line">//å°†å‰åå°é¡µé¢è¿›è¡Œåˆ†ç¦»</span><br><span class="line">/*</span><br><span class="line">è¯»å–viewç›®å½•ä¸‹çš„æŒ‡å®šæ–‡ä»¶ï¼Œè§£æå¹¶è¿”å›ç»™å®¢æˆ·ç«¯</span><br><span class="line">ç¬¬ä¸€ä¸ªå‚æ•°ï¼Œè¡¨ç¤ºæ¨¡æ¿æ–‡ä»¶ï¼Œç›¸å¯¹äºviewsç›®å½• views/index.html</span><br><span class="line">ç¬¬äºŒä¸ªå‚æ•°ï¼Œä¼ é€’ç»™æ¨¡æ¿ä½¿ç”¨çš„æ•°æ®ã€‚</span><br><span class="line">*/</span><br><span class="line">res.render(&quot;index&quot;);</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">//ç›‘å¬httpè¯·æ±‚</span><br><span class="line">app.listen(8081);</span><br></pre></td></tr></table></figure><blockquote><p>å½“æˆ‘ä»¬åœ¨è®¾ç½®main.cssæ ·å¼é“¾æ¥çš„æ—¶å€™ï¼Œæç¤ºè¯·æ±‚å¤±è´¥ï¼Œæ˜¯å› ä¸ºæˆ‘ä»¬æ²¡æœ‰è®¾ç½®å¯¹åº”çš„è·¯ç”±æ“ä½œ</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">app.get(&quot;/main.css&quot;, function(req, res, next)&#123;</span><br><span class="line"></span><br><span class="line">// é»˜è®¤å‘é€çš„æ˜¯htmlæ ¼å¼æ•°æ®ï¼Œæ²¡æœ‰åŠæ³•è§£æ</span><br><span class="line">// åœ¨è¿™é‡Œéœ€è¦è®¾ç½®è§£ææ ¼å¼å¤´</span><br><span class="line"></span><br><span class="line">res.setHeader(&quot;content-type&quot;, &quot;text/css&quot;);</span><br><span class="line"></span><br><span class="line">res.send(&quot;body &#123;background-color: red;&#125;&quot;)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><blockquote><p>ä½†æ˜¯ä¸Šè¿°è¿™ç§æ“ä½œå¤„ç†é™æ€æ–‡ä»¶è¿‡äºéº»çƒ¦ï¼Œæˆ‘ä»¬å¯ä»¥è®¾ç½®é™æ€æ–‡ä»¶æ‰˜ç®¡ç›®å½•</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">//ä¿®æ”¹index.html</span><br><span class="line">&lt;link rel=&quot;stylesheet&quot; href=&quot;/public/main.css&quot;&gt;</span><br><span class="line"></span><br><span class="line">//ä¿®æ”¹app.js</span><br><span class="line">/*</span><br><span class="line">è®¾ç½®é™æ€æ–‡ä»¶æ‰˜ç®¡</span><br><span class="line">ä¸‹è¿°ä»£ç çš„æ„æ€æ˜¯ï¼Œå¦‚æœåŠ è½½è·¯å¾„urlæ˜¯ä»¥/publicå¼€å¤´çš„ï¼Œå°±ä»¥åç»­æ“ä½œå¤„ç†</span><br><span class="line">*/</span><br><span class="line">app.use(&quot;/public&quot;, express.static(__dirname + &quot;/public&quot;));</span><br></pre></td></tr></table></figure><blockquote><p>ã€æ³¨ã€‘é¡¹ç›®é€»è¾‘ï¼š<br>ç”¨æˆ·å‘é€httpè¯·æ±‚ -&gt; url -&gt; è§£æè·¯ç”± -&gt; æ‰¾åˆ°åŒ¹é…çš„è§„åˆ™ -&gt; æ»¡è¶³è§„åˆ™æ‰§è¡Œç»‘å®šçš„å‡½æ•° -&gt; è¿”å›å¯¹åº”çš„å†…å®¹ã€‚<br>/public -&gt; é™æ€ -&gt; ç›´æ¥è¯»å–æŒ‡å®šç›®å½•ä¸‹çš„æ–‡ä»¶ï¼Œè¿”å›ç”¨æˆ·<br>åŠ¨æ€ -&gt; å¤„ç†ä¸šåŠ¡é€»è¾‘ï¼ŒåŠ è½½æ¨¡æ¿ï¼Œè§£ææ¨¡æ¿ -&gt; è¿”å›æ•°æ®ç»™ç”¨æˆ·ã€‚</p><h2 id="å…­ã€åˆ’åˆ†æ¨¡å—"><a href="#å…­ã€åˆ’åˆ†æ¨¡å—" class="headerlink" title="å…­ã€åˆ’åˆ†æ¨¡å—"></a>å…­ã€åˆ’åˆ†æ¨¡å—</h2><h3 id="æ ¹æ®åŠŸèƒ½è¿›è¡Œæ¨¡å—åˆ’åˆ†"><a href="#æ ¹æ®åŠŸèƒ½è¿›è¡Œæ¨¡å—åˆ’åˆ†" class="headerlink" title="æ ¹æ®åŠŸèƒ½è¿›è¡Œæ¨¡å—åˆ’åˆ†"></a>æ ¹æ®åŠŸèƒ½è¿›è¡Œæ¨¡å—åˆ’åˆ†</h3><p>å‰å°æ¨¡å—<br>åå°ç®¡ç†æ¨¡å—<br>APIæ¨¡å—</p><p>ä½¿ç”¨app.use()è¿›è¡Œæ¨¡å—åˆ’åˆ†</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">app.use(&quot;/admin&quot;, require(&apos;./routers/admin&apos;));</span><br><span class="line">app.use(&quot;/api&quot;, require(&quot;.routers/api&quot;));</span><br><span class="line">app.use(&quot;/&quot;, require(&quot;./routers/main&quot;));</span><br></pre></td></tr></table></figure><blockquote><p>åˆ›å»ºrouters/admin.js routers/api.js routers/main.js</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">var express = require(&quot;express&quot;);</span><br><span class="line">var router = express.Router();</span><br><span class="line"></span><br><span class="line">//è¿™é‡Œä¸éœ€è¦äº›/admin/userï¼Œå› ä¸ºå‰é¢å·²ç»å¤„ç†è¿‡äº†</span><br><span class="line">router.get(&quot;/user&quot;, function(req, res, next)&#123;</span><br><span class="line">res.send(&quot;ADMIN - User&quot;);</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">module.exports = router;</span><br></pre></td></tr></table></figure><blockquote><h3 id="å‰å°è·¯ç”±-æ¨¡æ¿"><a href="#å‰å°è·¯ç”±-æ¨¡æ¿" class="headerlink" title="å‰å°è·¯ç”±+æ¨¡æ¿"></a>å‰å°è·¯ç”±+æ¨¡æ¿</h3></blockquote><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="http://m.qpic.cn/psb?/V13wE8sQ0FBtUy/yrwfg0RB5*BrSANs3IltkSPIIe76l7bseNEbdTw4DDY!/b/dFYBAAAAAAAA&bo=BAKIAQAAAAADB60!&rf=viewer_4" alt="image" title="">                </div>                <div class="image-caption">image</div>            </figure><blockquote><h3 id="åå°è·¯ç”±-æ¨¡å—"><a href="#åå°è·¯ç”±-æ¨¡å—" class="headerlink" title="åå°è·¯ç”±+æ¨¡å—"></a>åå°è·¯ç”±+æ¨¡å—</h3></blockquote><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="http://m.qpic.cn/psb?/V13wE8sQ0FBtUy/yd3sN3SlMU22RfznIbFMYtreROhe80JUaw8Zx0xj7QU!/b/dFYBAAAAAAAA&bo=BgIEAgAAAAADByA!&rf=viewer_4" alt="image" title="">                </div>                <div class="image-caption">image</div>            </figure><blockquote><h3 id="åŠŸèƒ½å¼€å‘é¡ºåº"><a href="#åŠŸèƒ½å¼€å‘é¡ºåº" class="headerlink" title="åŠŸèƒ½å¼€å‘é¡ºåº"></a>åŠŸèƒ½å¼€å‘é¡ºåº</h3></blockquote><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="http://m.qpic.cn/psb?/V13wE8sQ0FBtUy/Rh6kslhjswehoKgecSqxrliFSMIG4q9rm*DjmbSuZs8!/b/dF4BAAAAAAAA&bo=EgJeAQAAAAADB20!&rf=viewer_4" alt="image" title="">                </div>                <div class="image-caption">image</div>            </figure><blockquote><h3 id="é¦–å…ˆæˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹å¦‚ä½•é“¾æ¥æ•°æ®åº“mongoDB"><a href="#é¦–å…ˆæˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹å¦‚ä½•é“¾æ¥æ•°æ®åº“mongoDB" class="headerlink" title="é¦–å…ˆæˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹å¦‚ä½•é“¾æ¥æ•°æ®åº“mongoDB"></a>é¦–å…ˆæˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹å¦‚ä½•é“¾æ¥æ•°æ®åº“mongoDB</h3></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mongod --dbpath=ç£ç›˜è·¯å¾„ port=ç«¯å£å·</span><br></pre></td></tr></table></figure><blockquote><h3 id="æ•°æ®åº“çš„ä½¿ç”¨"><a href="#æ•°æ®åº“çš„ä½¿ç”¨" class="headerlink" title="æ•°æ®åº“çš„ä½¿ç”¨"></a>æ•°æ®åº“çš„ä½¿ç”¨</h3></blockquote><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="http://m.qpic.cn/psb?/V13wE8sQ0FBtUy/bDrNzQyw4OQ2Xwat*g6CDTXSQcAgDzaFrgLSIH0L4HY!/b/dGcBAAAAAAAA&bo=JgJ0AQAAAAADB3M!&rf=viewer_4" alt="image" title="">                </div>                <div class="image-caption">image</div>            </figure><blockquote><p>ï¼ˆ1ï¼‰é¦–å…ˆåœ¨app.jsä¸­é“¾æ¥æ•°æ®åº“</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">//åŠ è½½æ•°æ®åº“æ¨¡å—</span><br><span class="line">var mongoose = require(&quot;mongoose&quot;);</span><br><span class="line">//é“¾æ¥æ•°æ®åº“</span><br><span class="line">mongoose.connect(&quot;mongodb://127.0.0.1:27017&quot;, function(err)&#123;</span><br><span class="line">if(err)&#123;</span><br><span class="line">console.log(&quot;æ•°æ®åº“é“¾æ¥å¤±è´¥ï¼š&quot; + err);</span><br><span class="line">&#125;else&#123;</span><br><span class="line">console.log(&quot;æ•°æ®åº“é“¾æ¥æˆåŠŸ&quot;);</span><br><span class="line">//å½“æˆ‘ä»¬æ•°æ®åº“é“¾æ¥æˆåŠŸä»¥åï¼Œç›‘å¬httpè¯·æ±‚</span><br><span class="line">app.listen(8081);</span><br><span class="line">&#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><blockquote><p>ï¼ˆ2ï¼‰åˆ›å»ºschemas/users.js</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">var mongoose = require(&quot;mongoose&quot;);</span><br><span class="line"></span><br><span class="line">//å®šä¹‰ç”¨æˆ·çš„è¡¨ç»“æ„,å¹¶å¯¹å¤–æä¾›æ¥å£</span><br><span class="line">module.exports = new mongoose.Schema(&#123;</span><br><span class="line">//ç”¨æˆ·å</span><br><span class="line">username: String,</span><br><span class="line">//å¯†ç </span><br><span class="line">password: String</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><blockquote><p>ï¼ˆ3ï¼‰åˆ›å»ºmodels/User.js</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">var mongoose = require(&quot;mongoose&quot;);</span><br><span class="line"></span><br><span class="line">var usersSchema = require(&quot;../schemas/users&quot;);</span><br><span class="line"></span><br><span class="line">//å®Œæˆäº†ä¸€ä¸ªæ¨¡å‹ç±»</span><br><span class="line">module.exports = mongoose.model(&quot;User&quot;, usersSchema);</span><br><span class="line">/*</span><br><span class="line">ã€æ³¨ã€‘åæœŸå¯ä»¥é€šè¿‡è¿™ä¸ªæ¨¡å‹ç±»åˆ›å»ºå¯¹è±¡</span><br><span class="line">ç›´æ¥å¯¹è¡¨ä¸­çš„æ•°æ®è¿›è¡Œæ“ä½œã€‚</span><br><span class="line">*/</span><br></pre></td></tr></table></figure><blockquote><h3 id="ç”¨æˆ·æ³¨å†Œ"><a href="#ç”¨æˆ·æ³¨å†Œ" class="headerlink" title="ç”¨æˆ·æ³¨å†Œ"></a>ç”¨æˆ·æ³¨å†Œ</h3></blockquote><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="http://m.qpic.cn/psb?/V13wE8sQ0FBtUy/YRE0y3xWBvM4MuKGsuZoc0aAjLYcIhTQP6kXcNCa73o!/b/dFYBAAAAAAAA&bo=jAEOAQAAAAADB6A!&rf=viewer_4" alt="image" title="">                </div>                <div class="image-caption">image</div>            </figure><blockquote><h3 id="è®¾ç½®ç”¨æˆ·ä¸»é¡µ"><a href="#è®¾ç½®ç”¨æˆ·ä¸»é¡µ" class="headerlink" title="è®¾ç½®ç”¨æˆ·ä¸»é¡µ"></a>è®¾ç½®ç”¨æˆ·ä¸»é¡µ</h3><p>ä¿®æ”¹routers/main.js</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">var express = require(&quot;express&quot;);</span><br><span class="line">var router = express.Router();</span><br><span class="line"></span><br><span class="line">//è¿™é‡Œä¸éœ€è¦äº›/admin/userï¼Œå› ä¸ºå‰é¢å·²ç»å¤„ç†è¿‡äº†</span><br><span class="line">router.get(&quot;/&quot;, function(req, res, next)&#123;</span><br><span class="line">// res.send(&quot;é¦–é¡µ&quot;);</span><br><span class="line">//åŠ è½½index.html</span><br><span class="line">res.render(&quot;main/index&quot;);</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">module.exports = router;</span><br></pre></td></tr></table></figure><blockquote><p>æ‹·è´å¯¹åº”çš„index.htmlï¼ˆå·²ç»å†™å¥½äº†ï¼‰ é¡µé¢åˆ°views/main/index.html<br>åŒæ—¶æ‹·è´å¯¹åº”çš„å…¶ä»–æ–‡ä»¶åˆ°publicä¸­</p></blockquote><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="http://m.qpic.cn/psb?/V13wE8sQ0FBtUy/x3.YvajSctA1zqznjRIefek90Yg7PR.8IIHL4RPwLx8!/b/dFYBAAAAAAAA&bo=8AFkAQAAAAADB7Y!&rf=viewer_4" alt="image" title="">                </div>                <div class="image-caption">image</div>            </figure><blockquote><p>åœ¨public/js/index.jsä¸­ç¼–å†™ç™»å½•æ³¨å†Œé€»è¾‘</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">//è®¾ç½®ç™»å½•å’Œæ³¨å†Œäº’æ–¥æ˜¾ç¤º</span><br><span class="line">$(function()&#123;</span><br><span class="line">$loginBox = $(&quot;#loginBox&quot;);</span><br><span class="line">$registerBox = $(&quot;#registerBox&quot;);</span><br><span class="line"></span><br><span class="line">//ç‚¹å‡»é©¬ä¸Šæ³¨å†Œï¼Œåˆ‡æ¢åˆ°æ³¨å†Œé¢æ¿</span><br><span class="line">$loginBox.find(&quot;a&quot;).on(&quot;click&quot;, function()&#123;</span><br><span class="line">$registerBox.show();</span><br><span class="line">$loginBox.hide();</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">//åˆ‡æ¢åˆ°ç™»å½•é¢æ¿</span><br><span class="line">$registerBox.find(&quot;a&quot;).on(&quot;click&quot;, function()&#123;</span><br><span class="line">$registerBox.hide();</span><br><span class="line">$loginBox.show();</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">//æ³¨å†Œ</span><br><span class="line">$registerBox.find(&quot;button&quot;).on(&quot;click&quot;, function()&#123;</span><br><span class="line">//ç‚¹å‡»æ³¨å†ŒæŒ‰é’®ï¼Œé€šè¿‡ajaxæäº¤è¯·æ±‚</span><br><span class="line">$.ajax(&#123;</span><br><span class="line">type: &quot;POST&quot;,</span><br><span class="line">url: &quot;/api/user/register&quot;,</span><br><span class="line">data: &#123;</span><br><span class="line">username: $registerBox.find(&quot;[name=username]&quot;).val(),</span><br><span class="line">password: $registerBox.find(&quot;[name=password]&quot;).val(),</span><br><span class="line">repassword: $registerBox.find(&quot;[name=repassword]&quot;).val()</span><br><span class="line">&#125;,</span><br><span class="line">dataType: &quot;json&quot;,</span><br><span class="line">success: function(result)&#123;</span><br><span class="line">console.log(result);</span><br><span class="line">&#125;,</span><br><span class="line">error: function(err)&#123;</span><br><span class="line">console.log(&quot;è¯·æ±‚é”™è¯¯ï¼š&quot; + err);</span><br><span class="line">&#125;</span><br><span class="line">&#125;);</span><br><span class="line">&#125;)</span><br><span class="line">&#125;)</span><br><span class="line">//è¿™ä¸ªéƒ¨åˆ†æˆ‘ä»¬åªæ˜¯å®Œæˆäº†å‰ç«¯æ³¨å†Œä¿¡æ¯çš„æäº¤</span><br></pre></td></tr></table></figure><blockquote><p>ä¸‹é¢æˆ‘ä»¬ç»™åç«¯å¢åŠ æ³¨å†Œçš„é€»è¾‘<br>å¤„ç†postè¯·æ±‚æ•°æ®éœ€è¦å¼•å…¥body-parseræ¨¡å—<br>åœ¨app.jsä¸­è®¾ç½®è¯¥æ¨¡å—</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">var bodyParser = require(&quot;body-parser&quot;); </span><br><span class="line">/*</span><br><span class="line">bodyParserè®¾ç½®</span><br><span class="line">*/</span><br><span class="line">app.use(bodyParser.urlencoded(&#123;extended: true&#125;));</span><br></pre></td></tr></table></figure><blockquote><p>åœ¨ routers/api.js ä¸­å®ç°</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><span class="line">var express = require(&quot;express&quot;);</span><br><span class="line">var router = express.Router();</span><br><span class="line"></span><br><span class="line">//å®šä¹‰ç»Ÿä¸€è¿”å›æ ¼å¼</span><br><span class="line">var responseData;</span><br><span class="line"></span><br><span class="line">router.use(function(req, res, next)&#123;</span><br><span class="line">responseData = &#123;</span><br><span class="line">code: 0,    //é”™è¯¯ç </span><br><span class="line">message: &quot;&quot; //ä¿¡æ¯</span><br><span class="line">&#125;</span><br><span class="line">next();</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">//è¿™é‡Œä¸éœ€è¦äº›/admin/userï¼Œå› ä¸ºå‰é¢å·²ç»å¤„ç†è¿‡äº†</span><br><span class="line">//åœ¨api.jsä¸­å¢åŠ è·¯ç”±</span><br><span class="line">/*</span><br><span class="line">ç”¨æˆ·æ³¨å†Œ</span><br><span class="line">è¿™é‡Œæˆ‘ä»¬éœ€è¦è·å–åˆ°æäº¤çš„postæ•°æ®ï¼Œ</span><br><span class="line">è¿™é‡Œéœ€è¦ç”¨åˆ°æ¨¡å—body-parser,ç”¨æ¥å¤„ç†postæäº¤è¿‡æ¥çš„æ•°æ®</span><br><span class="line">åœ¨app.jsä¸­å¼•å…¥è¯¥æ¨¡å—</span><br><span class="line">body-parserå¼•å…¥ä»¥åï¼Œè¿˜éœ€è¦è¿›è¡Œä¸€äº›ç›¸å…³é…ç½®ï¼Œå…·ä½“ç™¾åº¦</span><br><span class="line">è®¾ç½®ä»¥åï¼Œä¼šè‡ªåŠ¨åœ¨reqä¸­å¢åŠ ä¸€ä¸ªå±æ€§body</span><br><span class="line">è¿™ä¸ªå±æ€§ä¸­æœ‰æˆ‘ä»¬postè¯·æ±‚æäº¤çš„æ•°æ®</span><br><span class="line">*/</span><br><span class="line">router.post(&quot;/user/register&quot;, function(req, res, next)&#123;</span><br><span class="line">// console.log(&quot;register&quot;);</span><br><span class="line">// console.log(req.body);</span><br><span class="line">/*</span><br><span class="line">ä¸‹é¢æˆ‘ä»¬ç¼–å†™æ³¨å†Œé€»è¾‘</span><br><span class="line">1ã€åŸºæœ¬çš„æ³¨å†Œé€»è¾‘åˆ¤æ–­</span><br><span class="line">ï¼ˆ1ï¼‰ç”¨æˆ·åä¸èƒ½ä¸ºç©º</span><br><span class="line">ï¼ˆ2ï¼‰å¯†ç ä¸èƒ½ä¸ºç©º</span><br><span class="line">ï¼ˆ3ï¼‰ä¸¤æ¬¡è¾“å…¥çš„å¯†ç å¿…é¡»ä¸€è‡´</span><br><span class="line">2ã€å’Œæ•°æ®åº“ä¸­çš„æ•°æ®è¿›è¡Œæ¯”å¯¹ï¼Œåˆ¤æ–­æ˜¯å¦è¢«æ³¨å†Œäº†</span><br><span class="line">ï¼ˆ1ï¼‰æ•°æ®åº“çš„æŸ¥è¯¢</span><br><span class="line">ã€æ³¨ã€‘åœ¨åˆ¤æ–­è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬éœ€è¦éšæ—¶è¿”å›åˆ¤æ–­ç»“æœï¼Œæ‰€ä»¥éœ€è¦è®¾ç½®ç»Ÿä¸€æ¥å£</span><br><span class="line">*/</span><br><span class="line">var username = req.body.username;</span><br><span class="line">var password = req.body.password;</span><br><span class="line">var repassword = req.body.repassword;</span><br><span class="line"></span><br><span class="line">//ç”¨æˆ·åæ˜¯å¦ä¸ºç©º</span><br><span class="line">if(username == &quot;&quot;)&#123;</span><br><span class="line">responseData.code = 1;</span><br><span class="line">responseData.message = &quot;ç”¨æˆ·åä¸èƒ½ä¸ºç©º&quot;;</span><br><span class="line">//è¿”å›å‰ç«¯</span><br><span class="line">res.json(responseData);</span><br><span class="line">return;</span><br><span class="line">&#125;</span><br><span class="line">//å¯†ç ä¸èƒ½ä¸ºç©º</span><br><span class="line">if(password == &quot;&quot;)&#123;</span><br><span class="line">responseData.code = 2;</span><br><span class="line">responseData.message = &quot;å¯†ç ä¸èƒ½ä¸ºç©º&quot;;</span><br><span class="line">res.json(responseData);</span><br><span class="line">return;</span><br><span class="line">&#125;</span><br><span class="line">//ä¸¤æ¬¡è¾“å…¥çš„å¯†ç ä¸ä¸€è‡´ï¼Œå¿…é¡»ä¸€è‡´</span><br><span class="line">if(password != repassword)&#123;</span><br><span class="line">responseData.code = 3</span><br><span class="line">responseData.message = &quot;ä¸¤æ¬¡è¾“å…¥çš„å¯†ç ä¸ä¸€è‡´&quot;;</span><br><span class="line">res.json(responseData);</span><br><span class="line">return;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">//æ³¨å†ŒæˆåŠŸ</span><br><span class="line">responseData.message = &quot;æ³¨å†ŒæˆåŠŸ&quot;;</span><br><span class="line">res.json(responseData);</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">module.exports = router;</span><br></pre></td></tr></table></figure><blockquote><h3 id="æ·»åŠ æ•°æ®åº“éªŒè¯"><a href="#æ·»åŠ æ•°æ®åº“éªŒè¯" class="headerlink" title="æ·»åŠ æ•°æ®åº“éªŒè¯"></a>æ·»åŠ æ•°æ®åº“éªŒè¯</h3><p>routers/api.js</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">   //å¼•å…¥æ•°æ®æ¨¡å‹</span><br><span class="line">   var User = require(&quot;../models/User&quot;);</span><br><span class="line">   //æ’å…¥åˆ°ä¸€èˆ¬åˆ¤æ–­åé¢</span><br><span class="line">/*</span><br><span class="line">ç”¨æˆ·åæ˜¯å¦å·²ç»è¢«æ³¨å†Œäº†ï¼Œ</span><br><span class="line">å¦‚æœæ•°æ®åº“å·²ç»å­˜åœ¨å’Œæˆ‘ä»¬è¦æ³¨å†Œçš„ç”¨æˆ·ååŒåçš„æ•°æ®</span><br><span class="line">è¡¨ç¤ºç”¨æˆ·åå·²ç»è¢«æ³¨å†Œäº†</span><br><span class="line">*/</span><br><span class="line">User.findOne(&#123;</span><br><span class="line">username: username</span><br><span class="line">&#125;).then(function(userInfo)&#123;</span><br><span class="line">// console.log(userInfo);</span><br><span class="line">if(userInfo)&#123;</span><br><span class="line">//è¡¨ç¤ºæ•°æ®åº“ä¸­æœ‰è¯¥è®°å½•</span><br><span class="line">responseData.code = 4;</span><br><span class="line">responseData.message = &quot;ç”¨æˆ·åå·²ç»è¢«æ³¨å†Œäº†&quot;;</span><br><span class="line">res.json(responseData);</span><br><span class="line">return;</span><br><span class="line">&#125;</span><br><span class="line">//ä¿å­˜ç”¨æˆ·æ³¨å†Œçš„ä¿¡æ¯åˆ°æ•°æ®åº“ä¸­</span><br><span class="line">var user = new User(&#123;</span><br><span class="line">username: username,</span><br><span class="line">password: password</span><br><span class="line">&#125;);</span><br><span class="line">//ä¿å­˜åˆ°æ•°æ®åº“</span><br><span class="line">return user.save(); </span><br><span class="line">&#125;).then(function(newUserInfo)&#123;</span><br><span class="line">console.log(newUserInfo);</span><br><span class="line">//æ³¨å†ŒæˆåŠŸ æ•°æ®æˆåŠŸå­˜å‚¨åœ¨äº†adminæ•°æ®åº“ä¸­</span><br><span class="line">responseData.message = &quot;æ³¨å†ŒæˆåŠŸ&quot;;</span><br><span class="line">res.json(responseData);</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><blockquote><p>å°†æ³¨å†ŒæˆåŠŸçš„ä¿¡æ¯æ˜¾ç¤ºåœ¨é¡µé¢ä¸Š(public/js/index.js)</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">success: function(result)&#123;</span><br><span class="line">// console.log(result);</span><br><span class="line">$registerBox.find(&quot;.colWarning&quot;).html(result.message);</span><br><span class="line">if(!result.code)&#123;</span><br><span class="line">//æ³¨å†ŒæˆåŠŸ</span><br><span class="line">setTimeout(function()&#123;</span><br><span class="line">//æ˜¾ç¤ºç™»å½•é¡µé¢ï¼Œéšè—æ³¨å†Œé¡µé¢</span><br><span class="line">$registerBox.hide();</span><br><span class="line">$loginBox.show();</span><br><span class="line">&#125;, 1000);</span><br><span class="line">&#125;</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure><blockquote><p>åŒæ ·çš„åŸç†ï¼Œç¼–å†™ç™»å½•<br>public/js/index.js</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">//ç™»å½•</span><br><span class="line">$loginBox.find(&quot;button&quot;).on(&quot;click&quot;, function()&#123;</span><br><span class="line">//é€šè¿‡ajaxæäº¤è¯·æ±‚</span><br><span class="line">$.ajax(&#123;</span><br><span class="line">type: &quot;post&quot;,</span><br><span class="line">url: &quot;api/user/login&quot;,</span><br><span class="line">data: &#123;</span><br><span class="line">username: $loginBox.find(&quot;[name=username]&quot;).val(),</span><br><span class="line">password: $loginBox.find(&quot;[name=password]&quot;).val()</span><br><span class="line">&#125;,</span><br><span class="line">dataType: &quot;json&quot;,</span><br><span class="line">success: function(result)&#123;</span><br><span class="line">//æç¤ºä¿¡æ¯</span><br><span class="line">$loginBox.find(&quot;.colWarning&quot;).html(result.message);</span><br><span class="line">// console.log(result);</span><br><span class="line">if(!result.code)&#123;</span><br><span class="line">//ç™»å½•æˆåŠŸ</span><br><span class="line">setTimeout(function()&#123;</span><br><span class="line">//æ˜¾ç¤ºç™»å½•é¡µé¢ï¼Œéšè—æ³¨å†Œé¡µé¢</span><br><span class="line">$loginBox.hide();</span><br><span class="line">$userInfo.show();</span><br><span class="line"></span><br><span class="line">//å°†ç”¨æˆ·ä¿¡æ¯æ˜¾ç¤ºåœ¨é¡µé¢ä¸Š</span><br><span class="line">$userInfo.find(&quot;.username&quot;).html(result.userInfo.username);</span><br><span class="line">$userInfo.find(&quot;.info&quot;).html(&quot;ä½ å¥½ï¼Œæ¬¢è¿å…‰ä¸´æˆ‘çš„åšå®¢ï¼ğŸ˜&quot;);</span><br><span class="line">&#125;, 1000);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><blockquote><p>åœ¨routers/api.jsä¸­æ–°å¢ç™»å½•çš„è·¯ç”±</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">//æ–°å¢ç™»å½•çš„è·¯ç”±</span><br><span class="line">/*</span><br><span class="line">ç™»å½•</span><br><span class="line">*/</span><br><span class="line">router.post(&quot;/user/login&quot;, function(req, res, next)&#123;</span><br><span class="line">var username = req.body.username;</span><br><span class="line">var password = req.body.password;</span><br><span class="line"></span><br><span class="line">if(username == &quot;&quot; || password == &quot;&quot;)&#123;</span><br><span class="line">responseData.code = 1;</span><br><span class="line">responseData.message = &quot;ç”¨æˆ·åå’Œå¯†ç ä¸èƒ½ä¸ºç©º&quot;;</span><br><span class="line">res.json(responseData);</span><br><span class="line">return;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">//æŸ¥è¯¢æ•°æ®åº“ä¸­ç›¸åŒç”¨æˆ·åå’Œå¯†ç çš„è®°å½•æ˜¯å¦å­˜åœ¨ï¼Œå¦‚æœå­˜åœ¨åˆ™ç™»å½•æˆåŠŸ</span><br><span class="line">User.findOne(&#123;</span><br><span class="line">username: username,</span><br><span class="line">password: password</span><br><span class="line">&#125;).then(function(userInfo)&#123;</span><br><span class="line">if(!userInfo)&#123;</span><br><span class="line">responseData.code = 2;</span><br><span class="line">responseData.message = &quot;ç”¨æˆ·åæˆ–å¯†ç é”™è¯¯&quot;;</span><br><span class="line">res.json(responseData);</span><br><span class="line">return;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">//ç”¨æˆ·åå’Œå¯†ç æ­£ç¡®</span><br><span class="line">responseData.message = &quot;ç™»å½•æˆåŠŸ&quot;;</span><br><span class="line">//å°†ç™»å½•ä¿¡æ¯è¿”å›å‰ç«¯é¡µé¢</span><br><span class="line">responseData.userInfo = &#123;</span><br><span class="line">_id: userInfo._id,</span><br><span class="line">username: userInfo.username</span><br><span class="line">&#125;</span><br><span class="line">res.json(responseData);</span><br><span class="line">return;</span><br><span class="line">&#125;)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;å­¦å‰éœ€æ±‚&quot;&gt;&lt;a href=&quot;#å­¦å‰éœ€æ±‚&quot; class=&quot;headerlink&quot; title=&quot;å­¦å‰éœ€æ±‚&quot;&gt;&lt;/a&gt;å­¦å‰éœ€æ±‚&lt;/h2&gt;&lt;blockquote&gt;
&lt;h3 id=&quot;ä¸€ã€nodeå®‰è£…å’Œè¿è¡Œ&quot;&gt;&lt;a href=&quot;#ä¸€ã€nodeå®‰è£…å’Œè¿è¡Œ&quot; class=&quot;h
      
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>expressçš„è·¯ç”±</title>
    <link href="https://tianjiec.top/2018/12/20/express%E7%9A%84%E8%B7%AF%E7%94%B1/"/>
    <id>https://tianjiec.top/2018/12/20/expressçš„è·¯ç”±/</id>
    <published>2018-12-20T02:42:13.000Z</published>
    <updated>2018-12-20T03:07:29.013Z</updated>
    
    <content type="html"><![CDATA[<h1 id="expressè·¯ç”±ä¸åº”ç”¨æ¨¡å¼"><a href="#expressè·¯ç”±ä¸åº”ç”¨æ¨¡å¼" class="headerlink" title="expressè·¯ç”±ä¸åº”ç”¨æ¨¡å¼"></a>expressè·¯ç”±ä¸åº”ç”¨æ¨¡å¼</h1><h3 id="1-å¼•è¨€"><a href="#1-å¼•è¨€" class="headerlink" title="1. å¼•è¨€"></a>1. å¼•è¨€</h3><blockquote><p>Expressæ˜¯ä¸€ä¸ªåŸºäºNode.jsçš„è½»é‡çº§webå¼€å‘æ¡†æ¶ï¼Œå…·æœ‰ä½“ç§¯å°ï¼Œä½¿ç”¨çµæ´»ç­‰ç‰¹ç‚¹ã€‚æŸ¥çœ‹Expressçš„æºç ï¼Œå¦‚æœä¸è®¡ä¾›ä½¿ç”¨çš„ä¸­é—´ä»¶ï¼Œä¸»ä½“æ¡†æ¶åªæœ‰ä¸€åƒä½™è¡Œä»£ç ï¼Œéå¸¸ç®€ç»ƒã€‚</p><p>Expressæ¨¡å‹çš„æ ¸å¿ƒä¸ºExpressä¸­å®šä¹‰çš„è·¯ç”±å’Œè·¯ç”±å™¨ã€‚åˆ†æExpressæºç å¯å‘ç°Expressçš„è·¯ç”±æä¾›å¤šç§çµæ´»çš„åº”ç”¨æ¨¡å¼ã€‚</p><p>æˆ‘ä»¬é¦–å…ˆä»‹ç»ä¸€ä¸‹Expressä¸­çš„è·¯ç”±ã€è·¯ç”±å™¨ç›¸å…³æ¦‚å¿µã€ç»“æ„åŠå…¶ç‰¹ç‚¹ï¼Œç„¶åé’ˆå¯¹å…¸å‹åœºæ™¯æè¿°ä½¿ç”¨Expressè·¯ç”±çš„å››ç§åº”ç”¨æ¨¡å¼ã€‚</p></blockquote><h3 id="2-Expressä¸­çš„è·¯ç”±ä¸è·¯ç”±å™¨"><a href="#2-Expressä¸­çš„è·¯ç”±ä¸è·¯ç”±å™¨" class="headerlink" title="2.Expressä¸­çš„è·¯ç”±ä¸è·¯ç”±å™¨"></a>2.Expressä¸­çš„è·¯ç”±ä¸è·¯ç”±å™¨</h3><p>Expresså…·æœ‰å…¸å‹çš„MVCæ¨¡å‹ç‰¹å¾ã€‚æˆ‘ä»¬å°†è·¯ç”±å®šä¹‰ä¸ºä¸€ä¸ªäºŒå…ƒç»„route=(path, endpoint)ï¼šå…¶ä¸­pathä¸ºHTTPè¯·æ±‚çš„è·¯å¾„ï¼Œendpointä¸ºè¯·æ±‚è·¯å¾„åº”æ˜ å°„åˆ°çš„ç«¯ç‚¹ï¼ˆç«¯ç‚¹å¯è§†ä¸ºå¤„ç†è¯¥è¯·æ±‚çš„å®ä½“ï¼‰,åˆ™Expressä¸­çš„è·¯ç”±å™¨è´Ÿè´£å°†è¯·æ±‚æ˜ å°„åˆ°å¯¹åº”ç«¯ç‚¹è¿›è¡Œå¤„ç†ã€‚</p><p>Expressä¸­çš„è·¯ç”±å™¨åˆ†ä¸ºä¸¤ç§ç±»å‹:</p><p>appç±»å‹çš„è·¯ç”±å™¨å¸¸ä½¿ç”¨å¦‚ä¸‹ä»£ç åˆ›å»ºï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> express = <span class="built_in">require</span>(<span class="string">'express'</span>);</span><br><span class="line"><span class="keyword">var</span> app = express();</span><br></pre></td></tr></table></figure><p>routerç±»å‹çš„è·¯ç”±å™¨å¸¸ä½¿ç”¨å¦‚ä¸‹ä»£ç åˆ›å»º:</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> express = <span class="built_in">require</span>(<span class="string">'express'</span>);</span><br><span class="line"><span class="keyword">var</span> router = express.Router();</span><br></pre></td></tr></table></figure><blockquote><p>appå’Œrouteræ˜¯å½¢ä¸ºfunction(request, response, next)å½¢å¼çš„å‡½æ•°å¯¹è±¡ï¼Œä½¿ç”¨app.verb()ï¼Œrouter.verb()å½¢å¼å‡½æ•°å®ç°è·¯ç”±æ³¨å†Œï¼ˆè·¯ç”±æ³¨å†Œæœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªè§‚å¯Ÿè€…æ¨¡å¼ï¼‰ã€‚</p><p>app.verb()å’Œrouter.verb()ä¸­çš„verbå¸¸ä½¿ç”¨useã€getã€postã€putã€deleteã€routeç­‰åŠ¨è¯ï¼Œä¸åŒåŠ¨è¯ç®¡è¾–çš„HTTPè¯·æ±‚æ–¹æ³•èŒƒå›´ä¸åŒï¼Œè¿™äº›åŠ¨è¯å‡½æ•°çš„å‚æ•°å½¢å¼å¸¸ä¸º(pathExp, handleCallback)å½¢å¼ï¼šå…¶ä¸­pathExpè¡¨ç¤ºè¯·æ±‚è·¯å¾„ï¼Œå¯ä¸ºæ­£åˆ™è¡¨è¾¾å¼ï¼›handleCallbackä¸ºè·¯å¾„æ˜ å°„å¤„ç†å‡½æ•°ã€‚</p></blockquote><p>appæ˜¯Expressæ¡†æ¶æ‰€æ„å»ºç¨‹åºçš„è¯·æ±‚å¤„ç†å…¥å£ï¼Œappå¯ä½œä¸ºé¡¶å±‚è·¯ç”±å™¨ä½¿ç”¨ï¼Œåœ¨åº”ç”¨ä¸­ä¹Ÿå¯æŒ‚è½½ä¸‹çº§è·¯ç”±å™¨ï¼ˆä½¿ç”¨routerå¯¹è±¡ï¼‰ä»¥å®ç°åˆ†çº§è·¯ç”±ã€‚å…¶é—´çš„å…³ç³»å¯ç”±ä¸‹å›¾è¡¨ç¤ºï¼š</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="http://s1.51cto.com/images/20180716/1531726860898789.jpg?x-oss-process=image/watermark,size_16,text_QDUxQ1RP5Y2a5a6i,color_FFFFFF,t_100,g_se,x_10,y_10,shadow_90,type_ZmFuZ3poZW5naGVpdGk=" alt="expresså¯¹è±¡å…³ç³»å›¾.jpg" title="">                </div>                <div class="image-caption">expresså¯¹è±¡å…³ç³»å›¾.jpg</div>            </figure><p><strong>è€ƒå¯Ÿå¦‚ä¸‹ä»£ç ï¼š</strong> </p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">app.use(<span class="string">'/reports'</span>, router1);</span><br><span class="line">router1.get(<span class="string">'/querymysql/:id'</span>, queryMysqlData, handleQueryData);</span><br></pre></td></tr></table></figure><blockquote><p>å¯¹äºhttpè¯·æ±‚URLâ€œ/reports/querymysql/1â€ï¼ŒExpressä¸­çš„è·¯ç”±å™¨å°†æ­¤è¯·æ±‚è·¯ç”±åˆ°queryMysqlDataå‡½æ•°å¤„ç†ã€‚</p></blockquote><h3 id="3ã€Expressä¸­çš„è·¯ç”±åº”ç”¨æ¨¡å¼"><a href="#3ã€Expressä¸­çš„è·¯ç”±åº”ç”¨æ¨¡å¼" class="headerlink" title="3ã€Expressä¸­çš„è·¯ç”±åº”ç”¨æ¨¡å¼"></a>3ã€Expressä¸­çš„è·¯ç”±åº”ç”¨æ¨¡å¼</h3><h3 id="3-1-RESTæ¨¡å¼"><a href="#3-1-RESTæ¨¡å¼" class="headerlink" title="3.1.   RESTæ¨¡å¼"></a>3.1.   RESTæ¨¡å¼</h3><p>å¯¹äºä¸€ä¸ªä½¿ç”¨restfulé£æ ¼çš„åº”ç”¨, è®©æˆ‘ä»¬æƒ³ä¸€æƒ³åœ¨ä¸ä½¿ç”¨Expressçš„æ—¶å€™å¦‚ä½•åœ¨Node.jsä¸­å¤„ç†restè¯·æ±‚ï¼Œæˆ‘ä»¬å¸¸å¸¸ä¼šå†™ä¸‹å¦‚ä¸‹ç¤ºä¾‹ä»£ç ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> server = http.createServer(<span class="function"><span class="keyword">function</span> (<span class="params">request, response</span>) </span>&#123;</span><br><span class="line">     <span class="keyword">switch</span> (request.url) &#123;</span><br><span class="line">                    <span class="keyword">case</span> <span class="string">'uri1'</span></span><br><span class="line">                        handleUri1 (request, response);</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    <span class="keyword">case</span> <span class="string">' uri2'</span></span><br><span class="line">                        handleU ri2(request, response);</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    <span class="keyword">case</span> <span class="string">' uri3'</span></span><br><span class="line">                        handleU ri3 (request, response);</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line"> </span><br><span class="line">                    <span class="keyword">case</span> <span class="string">' uri4'</span></span><br><span class="line">                        handleU ri4 (request, response);</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    ...</span><br><span class="line">                    <span class="keyword">default</span>:</span><br><span class="line">                        logToConsole(<span class="string">'unknown path:'</span> + path);</span><br><span class="line">                        response.writeHead(<span class="number">404</span>);</span><br><span class="line">                        response.end(<span class="string">"404 Not found"</span>);</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>Expresså°†ä¸Šé¢ä»£ç ä¸­å¯¹æ¯ä¸ªrestèµ„æºçš„æ“ä½œ(switchåˆ†æ”¯)è½¬æ¢ä¸ºè·¯ç”±ï¼Œè·¯ç”±ä¸­çš„è·¯å¾„ä¸ºrestèµ„æºçš„URIï¼Œå¤„ç†ç«¯ç‚¹ä¸ºfunction(request, response, next)å½¢å¼ã€å¯¹restèµ„æºçš„æ“ä½œå‡½æ•°ã€‚</p><p>å¸¸ä½¿ç”¨app.routeå‡½æ•°å®ç°ä¸€ä¸ªå®Œæ•´çš„restfulæ¥å£ï¼Œå¦‚ä¸‹ç¤ºä¾‹ä»£ç ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">app.route(<span class="string">'/uri1'</span>)</span><br><span class="line">  .get(<span class="function"><span class="keyword">function</span>(<span class="params">req, res</span>) </span>&#123;</span><br><span class="line">    handleGetUri1();</span><br><span class="line">  &#125;)</span><br><span class="line">  .post(<span class="function"><span class="keyword">function</span>(<span class="params">req, res</span>) </span>&#123;</span><br><span class="line">    handlePost Uri1 ();</span><br><span class="line">  &#125;)</span><br><span class="line">  .put(<span class="function"><span class="keyword">function</span>(<span class="params">req, res</span>) </span>&#123;</span><br><span class="line">    handlePut Uri <span class="number">1</span>();</span><br><span class="line">  &#125;)</span><br><span class="line">.delete(<span class="function"><span class="keyword">function</span>(<span class="params">req, res</span>) </span>&#123;</span><br><span class="line">    handleDeleteUri <span class="number">1</span>();</span><br><span class="line">  &#125;);</span><br></pre></td></tr></table></figure><h3 id="3-2-AOPæ¨¡å¼"><a href="#3-2-AOPæ¨¡å¼" class="headerlink" title="3.2.   AOPæ¨¡å¼"></a>3.2.   AOPæ¨¡å¼</h3><p>åœ¨å¤„ç†ä¸åŒè·¯å¾„çš„HTTPè¯·æ±‚æ—¶ï¼Œå¸¸å¸¸éœ€è¦åœ¨è¯·æ±‚å¤„ç†å‰å’Œå¤„ç†ååšä¸€äº›é€šç”¨æ“ä½œï¼Œè¿™ç§åº”ç”¨éœ€æ±‚æ˜¯ä¸€ä¸ªå…¸å‹çš„AOPåº”ç”¨è¦æ±‚ã€‚</p><p>Expressä¸­å…è®¸å®šä¹‰ä¸€ä¸ªå…·æœ‰é€šé…è·¯å¾„çš„è·¯ç”±ï¼Œåœ¨è°ƒç”¨å…¶å®ƒè·¯å¾„çš„è·¯ç”±å‰ä¼šå…ˆè°ƒç”¨è¯¥é€šé…è·¯å¾„è·¯ç”±ã€‚æ­¤é€šé…è·¯å¾„è·¯ç”±ä¹Ÿæˆä¸ºå…¶å®ƒè·¯å¾„è·¯ç”±åˆ‡é¢çš„ä¸€ä¸ªæ³¨å…¥ç‚¹ï¼Œè€ƒå¯Ÿå¦‚ä¸‹ç¤ºä¾‹ä»£ç ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">router.use(<span class="function"><span class="keyword">function</span> <span class="title">timelog</span>(<span class="params">req,res,next</span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"receive report request time is:"</span>,<span class="built_in">Date</span>.now());</span><br><span class="line">    next(); <span class="comment">//æ³¨æ„nextå‡½æ•°çš„ä½¿ç”¨ï¼Œå¿…é¡»å£°æ˜è¯¥å‡½æ•°æ‰èƒ½è°ƒç”¨åç»§æ˜ å°„å‡½æ•°</span></span><br><span class="line">&#125;);</span><br><span class="line"> </span><br><span class="line">router.get(<span class="string">'/chart1'</span>, proxy(&#123;</span><br><span class="line">    target: <span class="string">'http://127.0.0.1:8082'</span>,</span><br><span class="line">    changeOrigin: <span class="literal">true</span>,</span><br><span class="line">    pathRewrite: &#123;</span><br><span class="line">        <span class="string">'^/reports/chart1'</span>: <span class="string">'/loadChart1'</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;));</span><br><span class="line"> </span><br><span class="line">router.get(<span class="string">'/querymysql/:id'</span>, queryMysqlData, handleQueryData);</span><br></pre></td></tr></table></figure><p>ä¸Šè¿°ä»£ç ä¸­ï¼Œåœ¨æ‰§è¡Œrouterçš„â€™/chart1â€™è·¯ç”±å’Œâ€™/querymysql/:idâ€™è·¯ç”±ä¹‹å‰éƒ½ä¼šæ‰§è¡Œtimelogå‡½æ•°ï¼Œåœ¨æ—¥å¿—ä¸­è®°å½•å½“å‰è·¯ç”±æ‰§è¡Œæ—¶é—´ã€‚</p><h3 id="3-3-è´£ä»»é“¾æ¨¡å¼"><a href="#3-3-è´£ä»»é“¾æ¨¡å¼" class="headerlink" title="3.3.   è´£ä»»é“¾æ¨¡å¼"></a>3.3.   è´£ä»»é“¾æ¨¡å¼</h3><p>åœ¨Node.jsä¸­ï¼Œç”±äºå¤šä½¿ç”¨å¼‚æ­¥å‡½æ•°ï¼Œå¸¸ä¼šå‡ºç°å¼‚æ­¥å›è°ƒå‡½æ•°ä¸­åµŒå¥—å¼‚æ­¥å›è°ƒå‡½æ•°çš„æƒ…å½¢ã€‚å½“å‡ºç°å¤šé‡å¼‚æ­¥å›è°ƒæ—¶,åˆ™ä»£ç ä¼šå˜å¾—æ··ä¹±å’Œéš¾ä»¥ç»´æŠ¤ã€‚</p><p>è€ƒå¯Ÿä¸€ä¸ªåº”ç”¨åœºæ™¯ï¼šåº”ç”¨éœ€è¦åœ¨æ•°æ®åº“ä¸­è¿›è¡Œå¤šæ¬¡æŸ¥è¯¢ï¼Œå¹¶å¯¹å¤šæ¬¡æŸ¥è¯¢çš„ç»“æœç»¼åˆå¤„ç†ã€‚è‹¥ä½¿ç”¨æ•°æ®åº“æä¾›çš„å¼‚æ­¥æŸ¥è¯¢æ¥å£ï¼Œåˆ™éœ€è¦åœ¨å‰ä¸€ä¸ªæŸ¥è¯¢æ“ä½œçš„å›è°ƒå‡½æ•°ä¸­è¿›è¡Œä¸‹ä¸€ä¸ªæŸ¥è¯¢æ“ä½œï¼Œè‹¥å†™åœ¨ä¸€ä¸ªå›è°ƒå‡½æ•°ä¸­ï¼Œä»£ç æ˜¾è‡ƒè‚¿ã€‚</p><p>Expressçš„ä¸€ä¸ªè·¯ç”±å¯å®šä¹‰å¤šä¸ªå¤„ç†å‡½æ•°ï¼Œè¿™äº›å¤„ç†å‡½æ•°å¯è®¾è®¡ä¸ºé“¾å¼è°ƒç”¨ï¼Œå®ç°äº†è´£ä»»é“¾æ¨¡å¼ï¼Œè€ƒå¯Ÿå¦‚ä¸‹ä»£ç ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">app.get(<span class="string">'/test'</span>,<span class="function"><span class="keyword">function</span>(<span class="params">req,res,next</span>)</span>&#123;</span><br><span class="line">    handle1();</span><br><span class="line">    next();</span><br><span class="line">&#125;,<span class="function"><span class="keyword">function</span>(<span class="params">req,res,next</span>)</span>&#123;</span><br><span class="line">    handle2();</span><br><span class="line">    next();</span><br><span class="line">&#125;,<span class="function"><span class="keyword">function</span>(<span class="params">req,res,next</span>)</span>&#123;</span><br><span class="line">   handle3();</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>ä¸Šè¿°ä»£ç ä¸­ï¼šhandle1, handle2, handle3æ„æˆäº†ä¸€ä¸ªå¤„ç†è´£ä»»é“¾â€œhandle1-&gt;handle2-&gt;handle3â€ï¼Œé€šè¿‡nextå‡½æ•°æŒ‡å¼•é“¾å¼è°ƒç”¨ã€‚</p><p>Expressä¸­è·¯ç”±çš„è´£ä»»é“¾åº”ç”¨ç‰¹æ€§ä½¿å¾—å¤šé‡å¼‚æ­¥åµŒå¥—çš„ä»£ç å˜å¾—æ¸…æ™°å’Œä¼˜é›…ã€‚</p><p>â€‹    é’ˆå¯¹æœ¬èŠ‚å¼€å§‹æåˆ°çš„æ•°æ®åº“æŸ¥è¯¢åº”ç”¨åœºæ™¯ï¼Œä¸‹é¢çš„ç¤ºä¾‹ä»£ç å±•ç¤ºäº†è´£ä»»é“¾æ¨¡å¼çš„åº”ç”¨ç‰¹ç‚¹ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">router.get(<span class="string">'/querymysql/:id'</span>, queryMysqlData, handleQueryData);</span><br><span class="line"> </span><br><span class="line"><span class="comment">//æŸ¥è¯¢mysqlè¡¨ä¸­çš„æ•°æ®</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">queryMysqlData</span>(<span class="params">req, res, next</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="string">"id"</span> <span class="keyword">in</span> req.params) &#123;</span><br><span class="line">        dbpool.query(<span class="string">" select * from articles where id=?"</span> ,[req.params.id], <span class="function"><span class="keyword">function</span> (<span class="params">err, rows, fields</span>) </span>&#123;</span><br><span class="line">            <span class="keyword">if</span> (err) &#123;</span><br><span class="line">                res.send(err.stack);</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="keyword">if</span> (rows &amp;&amp; rows.length &gt; <span class="number">0</span>) &#123;</span><br><span class="line">                    <span class="built_in">console</span>.log(<span class="string">'The queried rows is: '</span>, rows.length);</span><br><span class="line">                    res.articles = rows;</span><br><span class="line">                    next();</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    res.send(<span class="string">"no query results!"</span>);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        res.send(<span class="string">"invalid query params!"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="comment">//å¤„ç†æŸ¥è¯¢mysqlåå¾—åˆ°çš„æ•°æ®</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">handleQueryData</span>(<span class="params">req, res</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="string">"articles"</span> <span class="keyword">in</span> res) &#123;</span><br><span class="line">        res.send(<span class="string">"id:"</span> + req.params.id + <span class="string">";title:"</span> + res.articles[<span class="number">0</span>].title);</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        res.send(<span class="string">"no query data handled!"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="3-4-ç†”æ–­å™¨æ¨¡å¼"><a href="#3-4-ç†”æ–­å™¨æ¨¡å¼" class="headerlink" title="3.4.   ç†”æ–­å™¨æ¨¡å¼"></a>3.4.   ç†”æ–­å™¨æ¨¡å¼</h3><p>ä¸ŠèŠ‚æåˆ°çš„è´£ä»»é“¾æ¨¡å¼æœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªé€çº§è°ƒç”¨æ¨¡å‹ã€‚åœ¨åˆ†å¸ƒå¼æœåŠ¡æ¶æ„ï¼ˆå¾®æœåŠ¡æ¶æ„ï¼‰ä¸­ï¼Œæ·±åº¦è°ƒç”¨å¸¸å¸¸éœ€è¦è€ƒè™‘è°ƒç”¨å¯è¾¾æ€§é—®é¢˜ï¼Œå³éœ€è¦è€ƒè™‘æŸçº§è°ƒç”¨ä¼šå¦ä¸€ç›´ä¸å“åº”ã€‚è°ƒç”¨å¯è¾¾æ€§é—®é¢˜å¸¸ä½¿ç”¨ç†”æ–­å™¨æ¨¡å¼ï¼Œå³åœ¨è°ƒç”¨ç«¯è®¾ç½®ä¸€ä¸ªç†”æ–­å™¨ï¼Œç†”æ–­æ¡ä»¶äº§ç”Ÿæ—¶ï¼Œç†”æ–­å™¨å‘ç”Ÿç†”æ–­ï¼Œè¿”å›ç»™è°ƒç”¨æ–¹è°ƒç”¨å¤±è´¥ä¿¡æ¯ã€‚</p><p>è€ƒè™‘è¿™æ ·çš„åº”ç”¨åœºæ™¯ï¼šå¯¹äºä¸€äº›æœ‰å¤„ç†æ—¶é—´è¦æ±‚çš„è¯·æ±‚ï¼Œå½“åœ¨æŒ‡å®šæ—¶é—´å†…æ²¡æœ‰å®Œæˆå¤„ç†ï¼Œéœ€è¦å‘è¯·æ±‚æ–¹è¿”å›å¤„ç†å¤±è´¥ä¿¡æ¯ã€‚é’ˆå¯¹æ­¤åº”ç”¨åœºæ™¯ï¼Œå¯åœ¨Expressè·¯ç”±ä¸­è®¾ç½®è¶…æ—¶ç†”æ–­å™¨ï¼Œå½“å¤„ç†è¶…æ—¶ï¼Œå¼€å¯ç†”æ–­å™¨ï¼Œé€šçŸ¥è¯·æ±‚æ–¹æœ¬æ¬¡å¤„ç†è¯·æ±‚å¤±è´¥ã€‚</p><p>ä¸Šè¿°åº”ç”¨åœºæ™¯å¯ä½¿ç”¨å¦‚ä¸‹ç¤ºä¾‹ä»£ç åº”å¯¹ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">app.get(<span class="string">'/circuit'</span>,<span class="function"><span class="keyword">function</span>(<span class="params">req, res, next</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">var</span> bt=setTimeout(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        next(<span class="string">'route'</span>); <span class="comment">//è§¦å‘ç†”æ–­</span></span><br><span class="line">    &#125;,<span class="number">3000</span>); <span class="comment">//è®¾ç½®ç†”æ–­æ—¶é—´ä¸º3ç§’</span></span><br><span class="line">   res.breakTimer = bt;</span><br><span class="line">   next();</span><br><span class="line">&#125;,<span class="function"><span class="keyword">function</span>(<span class="params">req,res,next</span>)</span>&#123;</span><br><span class="line">    handle2();</span><br><span class="line">    next();</span><br><span class="line">&#125;,<span class="function"><span class="keyword">function</span>(<span class="params">req,res,next</span>)</span>&#123;</span><br><span class="line">   handle3();</span><br><span class="line">   clearTimeout(res.breakTimer);<span class="comment">//æ­£å¸¸æ‰§è¡Œå®Œæ¯•ï¼Œå–æ¶ˆç†”æ–­å®šæ—¶å™¨</span></span><br><span class="line">&#125;);</span><br><span class="line"> </span><br><span class="line">app.get(<span class="string">'/circuit '</span>,<span class="function"><span class="keyword">function</span>(<span class="params">req,res,next</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">if</span>(!res.finished)&#123; <span class="comment">//å¦‚æœè¿˜æ²¡æœ‰å“åº”ï¼Œå¯åŠ¨ç†”æ–­</span></span><br><span class="line">    <span class="comment">//è¿”å›ç»™è°ƒç”¨è€…ç†”æ–­ä¿¡æ¯</span></span><br><span class="line">    res.send(<span class="string">"breakCondition is true, notify the invoker."</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h2 id="è·¯å¾„å’Œå¥æŸ„"><a href="#è·¯å¾„å’Œå¥æŸ„" class="headerlink" title="è·¯å¾„å’Œå¥æŸ„"></a>è·¯å¾„å’Œå¥æŸ„</h2><h3 id="ç†è§£äº†è·¯å¾„å’Œå¥æŸ„ï¼Œæ‰ç®—çœŸçš„ä¼šäº†Expressè·¯ç”±çš„ä½¿ç”¨"><a href="#ç†è§£äº†è·¯å¾„å’Œå¥æŸ„ï¼Œæ‰ç®—çœŸçš„ä¼šäº†Expressè·¯ç”±çš„ä½¿ç”¨" class="headerlink" title="ç†è§£äº†è·¯å¾„å’Œå¥æŸ„ï¼Œæ‰ç®—çœŸçš„ä¼šäº†Expressè·¯ç”±çš„ä½¿ç”¨"></a>ç†è§£äº†è·¯å¾„å’Œå¥æŸ„ï¼Œæ‰ç®—çœŸçš„ä¼šäº†Expressè·¯ç”±çš„ä½¿ç”¨</h3><p>è·¯ç”±ï¼šå°±æ˜¯å¦‚ä½•å¤„ç†HTTPè¯·æ±‚ä¸­çš„è·¯å¾„éƒ¨åˆ†ã€‚</p><p>æ¯ä¸ªè·¯å¾„éƒ½ä¼šæœ‰å¯¹åº”çš„å‡½æ•°æ¥å¤„ç†ï¼ˆè¿™ä¸ªå‡½æ•°å«å¥æŸ„ï¼‰ï¼Œä¸‹é¢ä¸€ä¸ªä¸€ä¸ªæ¥è¯´ã€‚</p><h4 id="ä¸€ã€æœ‰å…³è·¯å¾„"><a href="#ä¸€ã€æœ‰å…³è·¯å¾„" class="headerlink" title="ä¸€ã€æœ‰å…³è·¯å¾„"></a>ä¸€ã€æœ‰å…³è·¯å¾„</h4><p>è·¯å¾„å¯ä»¥æ˜¯ä¸€ä¸ªStringç±»å‹ä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ªæ­£åˆ™è¡¨è¾¾å¼ï¼Œä¾‹å­ï¼š</p><p>1ã€å½“è·¯å¾„æ˜¯Stringï¼š</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://ss1.baidu.com/6ONXsjip0QIZ8tyhnq/it/u=1053068413,3123129933&fm=173&s=AC9825D24BFEB6CA40BCCD030100E0C2&w=515&h=278&img.JPEG" alt="img" title="">                </div>                <div class="image-caption">img</div>            </figure><p>å¦‚ä¸Šå›¾æ‰€ç¤ºé…ç½®è·¯ç”±ï¼Œé¡µé¢åˆ†åˆ«è®¿é—®ï¼š</p><p><a href="http://localhost:1234/abcd" target="_blank" rel="noopener">http://localhost:1234/abcd</a></p><p>è¾“å‡ºï¼šThis is list</p><p><a href="http://localhost:1234/list/news/" target="_blank" rel="noopener">http://localhost:1234/list/news/</a></p><p>è¾“å‡ºï¼šThis is news</p><p><a href="http://localhost:1234/list/news/123" target="_blank" rel="noopener">http://localhost:1234/list/news/123</a></p><p>è¾“å‡ºï¼šThis is list news:123</p><p>2ã€å½“è·¯å¾„æ˜¯æ­£åˆ™è¡¨è¾¾å¼ï¼š</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://ss2.baidu.com/6ONYsjip0QIZ8tyhnq/it/u=1685331371,3718706668&fm=173&s=AC9835D3C9C8B4415AE5C50F0100E0C2&w=509&h=158&img.JPEG" alt="img" title="">                </div>                <div class="image-caption">img</div>            </figure><p>ç¬¬ä¸€ä¸ªè·¯ç”±åŒ¹é…çš„æ˜¯/mobile/1[åä¸ªæ•°å­—]ï¼Œé¡µé¢è®¿é—®ï¼š</p><p><a href="http://localhost:1234/mobile/1XXXXXXXXXX" target="_blank" rel="noopener">http://localhost:1234/mobile/1XXXXXXXXXX</a></p><p>è¾“å‡ºï¼šThis is a mobile phone â€¦â€¦</p><p>ç¬¬äºŒä¸ªè·¯ç”±åŒ¹é…çš„æ˜¯/abcdæˆ–è€…/acdã€‚</p><h4 id="äºŒã€æœ‰å…³å¥æŸ„"><a href="#äºŒã€æœ‰å…³å¥æŸ„" class="headerlink" title="äºŒã€æœ‰å…³å¥æŸ„"></a>äºŒã€æœ‰å…³å¥æŸ„</h4><p>æœ‰å…³å¥æŸ„ï¼Œè¯´ä¸¤ä¸ªé—®é¢˜</p><p>1ã€nextå’Œnextï¼ˆâ€™routeâ€™ï¼‰åŒºåˆ«</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">app.get(<span class="string">'/'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">request,response,next</span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="number">1</span>);</span><br><span class="line">    next();</span><br><span class="line">&#125;,<span class="function"><span class="keyword">function</span>(<span class="params">req, res ,next</span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="number">2</span>);</span><br><span class="line">    next(<span class="string">'route'</span>);</span><br><span class="line">&#125;);</span><br><span class="line">app.get(<span class="string">'/'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">req, res ,next</span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="number">3</span>);</span><br><span class="line">    next()</span><br><span class="line">&#125;,<span class="function"><span class="keyword">function</span>(<span class="params">req, res ,next</span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="number">4</span>);</span><br><span class="line">    next(<span class="string">'route'</span>);</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>å¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œæœ‰ä¸‰ä¸ªåœ°æ–¹åŠ äº†nextï¼Œå®ä¾‹æµ‹è¯•å‘ç°ï¼š</p><p>å½“ä½ç½®1æ˜¯next()æ—¶ï¼Œç»“æœè¾“å‡ºï¼š1234</p><p>å½“ä½ç½®1æ˜¯next(â€˜routerâ€™)æ—¶ï¼Œç»“æœè¾“å‡ºï¼š134</p><h5 id="ç”±æ­¤å¯è§ï¼ŒäºŒè€…çš„åŒºåˆ«å°±æ˜¯ï¼šnextä»ä¸‹ä¸€ä¸ªå¤„ç†å‡½æ•°å¼€å§‹å¾€ä¸‹æ‰§è¡Œï¼Œnext-â€˜routerâ€™-ï¼Œç›´æ¥æ‰§è¡Œä¸‹ä¸€ä¸ªç›¸åŒè·¯ç”±ã€‚"><a href="#ç”±æ­¤å¯è§ï¼ŒäºŒè€…çš„åŒºåˆ«å°±æ˜¯ï¼šnextä»ä¸‹ä¸€ä¸ªå¤„ç†å‡½æ•°å¼€å§‹å¾€ä¸‹æ‰§è¡Œï¼Œnext-â€˜routerâ€™-ï¼Œç›´æ¥æ‰§è¡Œä¸‹ä¸€ä¸ªç›¸åŒè·¯ç”±ã€‚" class="headerlink" title="ç”±æ­¤å¯è§ï¼ŒäºŒè€…çš„åŒºåˆ«å°±æ˜¯ï¼šnextä»ä¸‹ä¸€ä¸ªå¤„ç†å‡½æ•°å¼€å§‹å¾€ä¸‹æ‰§è¡Œï¼Œnext(â€˜routerâ€™)ï¼Œç›´æ¥æ‰§è¡Œä¸‹ä¸€ä¸ªç›¸åŒè·¯ç”±ã€‚"></a>ç”±æ­¤å¯è§ï¼ŒäºŒè€…çš„åŒºåˆ«å°±æ˜¯ï¼šnextä»ä¸‹ä¸€ä¸ªå¤„ç†å‡½æ•°å¼€å§‹å¾€ä¸‹æ‰§è¡Œï¼Œnext(â€˜routerâ€™)ï¼Œç›´æ¥æ‰§è¡Œä¸‹ä¸€ä¸ªç›¸åŒè·¯ç”±ã€‚</h5><p>2ã€‘param</p><p>paramåœ¨è·¯ç”±ä¸­ä¹Ÿç›¸å½“äºæ˜¯ä¸€ä¸ªä¸­é—´ä»¶ä½œç”¨ã€‚ä¾‹å­ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">app.param(<span class="string">"listname"</span>, <span class="function"><span class="keyword">function</span>(<span class="params">req, res, next, listname</span>)</span>&#123;</span><br><span class="line">    req.list = [<span class="string">'item0'</span>, <span class="string">'item1'</span>, <span class="string">'item2'</span>];</span><br><span class="line">    next();</span><br><span class="line">&#125;)</span><br><span class="line">app.get(<span class="string">'/list/:listname'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">req, res, next</span>)</span>&#123;</span><br><span class="line">    res.send(<span class="string">'list:\n'</span> + req.list.join(<span class="string">''</span>));</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>ä¸Šé¢è¿™ä¸ªè·¯ç”±è¾“å‡ºï¼šlist:item0item1item2</p><p>app.paramä¼šåœ¨è·¯ç”±å‰æ‰§è¡Œï¼Œéœ€è¦æ³¨æ„çš„æ˜¯listnameå‚æ•°ä¸€å®šè¦å¯¹åº”ã€‚</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;expressè·¯ç”±ä¸åº”ç”¨æ¨¡å¼&quot;&gt;&lt;a href=&quot;#expressè·¯ç”±ä¸åº”ç”¨æ¨¡å¼&quot; class=&quot;headerlink&quot; title=&quot;expressè·¯ç”±ä¸åº”ç”¨æ¨¡å¼&quot;&gt;&lt;/a&gt;expressè·¯ç”±ä¸åº”ç”¨æ¨¡å¼&lt;/h1&gt;&lt;h3 id=&quot;1-å¼•è¨€&quot;&gt;&lt;a href=&quot;#1
      
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>mongoose</title>
    <link href="https://tianjiec.top/2018/12/20/mongoose/"/>
    <id>https://tianjiec.top/2018/12/20/mongoose/</id>
    <published>2018-12-20T02:18:28.000Z</published>
    <updated>2018-12-20T02:23:42.310Z</updated>
    
    <content type="html"><![CDATA[<h1 id="ç®€ä»‹"><a href="#ç®€ä»‹" class="headerlink" title="ç®€ä»‹"></a>ç®€ä»‹</h1><p>ã€€ã€€Mongooseæ˜¯åœ¨node.jså¼‚æ­¥ç¯å¢ƒä¸‹å¯¹mongodbè¿›è¡Œä¾¿æ·æ“ä½œçš„å¯¹è±¡æ¨¡å‹å·¥å…·</p><p>ã€€ã€€é‚£ä¹ˆè¦ä½¿ç”¨å®ƒï¼Œé¦–å…ˆä½ å¾—è£…ä¸Šnode.jså’Œmongodb,å…³äºmongodbçš„å®‰è£…å’Œæ“ä½œä»‹ç»å¯ä»¥å‚è€ƒï¼š<a href="http://www.cnblogs.com/zhongweiv/p/node_mongodb.html" target="_blank" rel="noopener">http://www.cnblogs.com/zhongweiv/p/node_mongodb.html</a></p><p>ã€€ã€€Githubåœ°å€ï¼š<a href="https://github.com/Automattic/mongoose" target="_blank" rel="noopener">https://github.com/Automattic/mongoose</a></p><p>ã€€ã€€API Docsï¼š<a href="http://mongoosejs.com/docs/guide.html" target="_blank" rel="noopener">http://mongoosejs.com/docs/guide.html</a></p><p>ã€€ã€€å‰é¢æœ‰ä»‹ç»è¿‡ç”¨node-mongodb-nativeæ¥æ“ä½œmongodbï¼Œå®é™…å¼€å‘ä¸­ä¼°è®¡æ›´å¤šä¼šé€‰ç”¨ç±»ä¼¼mongooseçš„æ¨¡å—æ¥æ“ä½œæ¥æå‡å¼€å‘æ•ˆç‡</p><p>ã€€ã€€ä¸‹é¢æˆ‘ä»¬ä¸€æ­¥æ­¥æ¥äº†è§£mongooseçš„åŸºæœ¬æ“ä½œ^_^!</p><h1 id="mongooseå®‰è£…"><a href="#mongooseå®‰è£…" class="headerlink" title="mongooseå®‰è£…"></a>mongooseå®‰è£…</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install mongoose</span><br></pre></td></tr></table></figure><p>ã€€ã€€å®‰è£…æˆåŠŸåå¦‚ä¸‹å›¾ï¼š</p><blockquote><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://images.cnblogs.com/cnblogs_com/zhongweiv/804376/o_1.png" alt="img" title="">                </div>                <div class="image-caption">img</div>            </figure></blockquote><p>ã€€ã€€å®‰è£…æˆåŠŸåï¼Œå°±å¯ä»¥é€šè¿‡ require(â€˜mongooseâ€™) æ¥ä½¿ç”¨ï¼</p><h1 id="è¿æ¥å­—ç¬¦ä¸²"><a href="#è¿æ¥å­—ç¬¦ä¸²" class="headerlink" title="è¿æ¥å­—ç¬¦ä¸²"></a>è¿æ¥å­—ç¬¦ä¸²</h1><p>ã€€ã€€åˆ›å»ºä¸€ä¸ªdb.js</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> mongoose = <span class="built_in">require</span>(<span class="string">'mongoose'</span>);</span><br><span class="line">DB_URL = <span class="string">'mongodb://localhost:27017/mongoosedemo'</span>;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">*è¿æ¥</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line">mongoose.connect(DB_URL);</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">*</span></span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;ç®€ä»‹&quot;&gt;&lt;a href=&quot;#ç®€ä»‹&quot; class=&quot;headerlink&quot; title=&quot;ç®€ä»‹&quot;&gt;&lt;/a&gt;ç®€ä»‹&lt;/h1&gt;&lt;p&gt;ã€€ã€€Mongooseæ˜¯åœ¨node.jså¼‚æ­¥ç¯å¢ƒä¸‹å¯¹mongodbè¿›è¡Œä¾¿æ·æ“ä½œçš„å¯¹è±¡æ¨¡å‹å·¥å…·&lt;/p&gt;
&lt;p&gt;ã€€ã€€é‚£ä¹ˆè¦ä½¿ç”¨å®ƒï¼Œé¦–å…ˆä½ å¾—è£…ä¸Šno
      
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>æ¡†æ¶åˆæ¢-blogé¡¹ç›®</title>
    <link href="https://tianjiec.top/2018/12/19/%E6%A1%86%E6%9E%B6%E5%88%9D%E6%8E%A2-blog%E9%A1%B9%E7%9B%AE/"/>
    <id>https://tianjiec.top/2018/12/19/æ¡†æ¶åˆæ¢-blogé¡¹ç›®/</id>
    <published>2018-12-19T11:51:16.000Z</published>
    <updated>2018-12-19T11:51:16.179Z</updated>
    
    <summary type="html">
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>ES6 Promiseç”¨æ³•</title>
    <link href="https://tianjiec.top/2018/12/19/ES6-Promise%E7%94%A8%E6%B3%95/"/>
    <id>https://tianjiec.top/2018/12/19/ES6-Promiseç”¨æ³•/</id>
    <published>2018-12-19T11:33:07.000Z</published>
    <updated>2018-12-19T11:46:28.251Z</updated>
    
    <content type="html"><![CDATA[<h1 id="ES6-Promise-ç”¨æ³•è®²è§£"><a href="#ES6-Promise-ç”¨æ³•è®²è§£" class="headerlink" title="ES6 Promise ç”¨æ³•è®²è§£"></a><a href="https://www.cnblogs.com/whybxy/p/7645578.html" target="_blank" rel="noopener">ES6 Promise ç”¨æ³•è®²è§£</a></h1><blockquote><p>Promiseæ˜¯ä¸€ä¸ªæ„é€ å‡½æ•°ï¼Œè‡ªå·±èº«ä¸Šæœ‰allã€rejectã€resolveè¿™å‡ ä¸ªçœ¼ç†Ÿçš„æ–¹æ³•ï¼ŒåŸå‹ä¸Šæœ‰thenã€catchç­‰åŒæ ·å¾ˆçœ¼ç†Ÿçš„æ–¹æ³•ã€‚</p></blockquote><p>é‚£å°±newä¸€ä¸ª</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> p = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span>(<span class="params">resolve, reject</span>)</span>&#123;</span><br><span class="line">    <span class="comment">//å¼‚æ­¥æ“ä½œ</span></span><br><span class="line">    setTimeout(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">"æ‰§è¡Œå®Œæˆ"</span>);</span><br><span class="line">        resolve(<span class="string">"data"</span>);</span><br><span class="line">    &#125;, <span class="number">2000</span>);</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>Promiseçš„æ„é€ å‡½æ•°æ¥æ”¶ä¸€ä¸ªå‚æ•°ï¼Œæ˜¯å‡½æ•°ï¼Œå¹¶ä¸”ä¼ å…¥ä¸¤ä¸ªå‚æ•°ï¼šresolveï¼Œrejectï¼Œåˆ†åˆ«è¡¨ç¤ºå¼‚æ­¥æ“ä½œæ‰§è¡ŒæˆåŠŸåçš„å›è°ƒå‡½æ•°å’Œå¼‚æ­¥æ“ä½œæ‰§è¡Œå¤±è´¥åçš„å›è°ƒå‡½æ•°ã€‚å…¶å®è¿™é‡Œç”¨â€œæˆåŠŸâ€å’Œâ€œå¤±è´¥â€æ¥æè¿°å¹¶ä¸å‡†ç¡®ï¼ŒæŒ‰ç…§æ ‡å‡†æ¥è®²ï¼Œresolveæ˜¯å°†Promiseçš„çŠ¶æ€ç½®ä¸ºfullfiledï¼Œrejectæ˜¯å°†Promiseçš„çŠ¶æ€ç½®ä¸ºrejectedã€‚ä¸è¿‡åœ¨æˆ‘ä»¬å¼€å§‹é˜¶æ®µå¯ä»¥å…ˆè¿™ä¹ˆç†è§£ï¼Œåé¢å†ç»†ç©¶æ¦‚å¿µã€‚</p><p>åœ¨ä¸Šé¢çš„ä»£ç ä¸­ï¼Œæˆ‘ä»¬æ‰§è¡Œäº†ä¸€ä¸ªå¼‚æ­¥æ“ä½œï¼Œä¹Ÿå°±æ˜¯setTimeoutï¼Œ2ç§’åï¼Œè¾“å‡ºâ€œæ‰§è¡Œå®Œæˆâ€ï¼Œå¹¶ä¸”è°ƒç”¨resolveæ–¹æ³•ã€‚</p><p>è¿è¡Œä»£ç ï¼Œä¼šåœ¨2ç§’åè¾“å‡ºâ€œæ‰§è¡Œå®Œæˆâ€ã€‚æ³¨æ„ï¼æˆ‘åªæ˜¯newäº†ä¸€ä¸ªå¯¹è±¡ï¼Œå¹¶æ²¡æœ‰è°ƒç”¨å®ƒï¼Œæˆ‘ä»¬ä¼ è¿›å»çš„å‡½æ•°å°±å·²ç»æ‰§è¡Œäº†ï¼Œè¿™æ˜¯éœ€è¦æ³¨æ„çš„ä¸€ä¸ªç»†èŠ‚ã€‚æ‰€ä»¥æˆ‘ä»¬ç”¨Promiseçš„æ—¶å€™ä¸€èˆ¬æ˜¯åŒ…åœ¨ä¸€ä¸ªå‡½æ•°ä¸­ï¼Œåœ¨éœ€è¦çš„æ—¶å€™å»è¿è¡Œè¿™ä¸ªå‡½æ•°ï¼Œå¦‚ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">runAsync</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">var</span> p = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span>(<span class="params">resolve, reject</span>)</span>&#123;</span><br><span class="line">        <span class="comment">//åšä¸€äº›å¼‚æ­¥æ“ä½œ</span></span><br><span class="line">        setTimeout(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">            <span class="built_in">console</span>.log(<span class="string">'æ‰§è¡Œå®Œæˆ'</span>);</span><br><span class="line">            resolve(<span class="string">'éšä¾¿ä»€ä¹ˆæ•°æ®'</span>);</span><br><span class="line">        &#125;, <span class="number">2000</span>);</span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="keyword">return</span> p;            </span><br><span class="line">&#125;</span><br><span class="line">runAsync()</span><br></pre></td></tr></table></figure><p>è¿™æ—¶å€™ä½ åº”è¯¥æœ‰ä¸¤ä¸ªç–‘é—®ï¼š1.åŒ…è£…è¿™ä¹ˆä¸€ä¸ªå‡½æ•°æœ‰æ¯›çº¿ç”¨ï¼Ÿ2.resolve(â€˜éšä¾¿ä»€ä¹ˆæ•°æ®â€™);è¿™æ˜¯å¹²æ¯›çš„ï¼Ÿ</p><p>æˆ‘ä»¬ç»§ç»­æ¥è®²ã€‚åœ¨æˆ‘ä»¬åŒ…è£…å¥½çš„å‡½æ•°æœ€åï¼Œä¼šreturnå‡ºPromiseå¯¹è±¡ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œæ‰§è¡Œè¿™ä¸ªå‡½æ•°æˆ‘ä»¬å¾—åˆ°äº†ä¸€ä¸ªPromiseå¯¹è±¡ã€‚è¿˜è®°å¾—Promiseå¯¹è±¡ä¸Šæœ‰thenã€catchæ–¹æ³•å§ï¼Ÿè¿™å°±æ˜¯å¼ºå¤§ä¹‹å¤„äº†ï¼Œçœ‹ä¸‹é¢çš„ä»£ç ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">runAsync().then(<span class="function"><span class="keyword">function</span>(<span class="params">data</span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(data);</span><br><span class="line">    <span class="comment">//åé¢å¯ä»¥ç”¨ä¼ è¿‡æ¥çš„æ•°æ®åšäº›å…¶ä»–æ“ä½œ</span></span><br><span class="line">    <span class="comment">//......</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>åœ¨runAsync()çš„è¿”å›ä¸Šç›´æ¥è°ƒç”¨thenæ–¹æ³•ï¼Œthenæ¥æ”¶ä¸€ä¸ªå‚æ•°ï¼Œæ˜¯å‡½æ•°ï¼Œå¹¶ä¸”ä¼šæ‹¿åˆ°æˆ‘ä»¬åœ¨runAsyncä¸­è°ƒç”¨resolveæ—¶ä¼ çš„çš„å‚æ•°ã€‚è¿è¡Œè¿™æ®µä»£ç ï¼Œä¼šåœ¨2ç§’åè¾“å‡ºâ€œæ‰§è¡Œå®Œæˆâ€ï¼Œç´§æ¥ç€è¾“å‡ºâ€œéšä¾¿ä»€ä¹ˆæ•°æ®â€ã€‚</p><p>è¿™æ—¶å€™ä½ åº”è¯¥æœ‰æ‰€é¢†æ‚Ÿäº†ï¼ŒåŸæ¥thené‡Œé¢çš„å‡½æ•°å°±è·Ÿæˆ‘ä»¬å¹³æ—¶çš„å›è°ƒå‡½æ•°ä¸€ä¸ªæ„æ€ï¼Œèƒ½å¤Ÿåœ¨runAsyncè¿™ä¸ªå¼‚æ­¥ä»»åŠ¡æ‰§è¡Œå®Œæˆä¹‹åè¢«æ‰§è¡Œã€‚è¿™å°±æ˜¯Promiseçš„ä½œç”¨äº†ï¼Œç®€å•æ¥è®²ï¼Œå°±æ˜¯èƒ½æŠŠåŸæ¥çš„å›è°ƒå†™æ³•åˆ†ç¦»å‡ºæ¥ï¼Œåœ¨å¼‚æ­¥æ“ä½œæ‰§è¡Œå®Œåï¼Œç”¨é“¾å¼è°ƒç”¨çš„æ–¹å¼æ‰§è¡Œå›è°ƒå‡½æ•°ã€‚</p><p>ä½ å¯èƒ½ä¼šä¸å±‘ä¸€é¡¾ï¼Œé‚£ä¹ˆç‰›é€¼è½°è½°çš„Promiseå°±è¿™ç‚¹èƒ½è€ï¼Ÿæˆ‘æŠŠå›è°ƒå‡½æ•°å°è£…ä¸€ä¸‹ï¼Œç»™runAsyncä¼ è¿›å»ä¸ä¹Ÿä¸€æ ·å—ï¼Œå°±åƒè¿™æ ·ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">runAsync</span>(<span class="params">callback</span>)</span>&#123;</span><br><span class="line">    setTimeout(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'æ‰§è¡Œå®Œæˆ'</span>);</span><br><span class="line">        callback(<span class="string">'éšä¾¿ä»€ä¹ˆæ•°æ®'</span>);</span><br><span class="line">    &#125;, <span class="number">2000</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">runAsync(<span class="function"><span class="keyword">function</span>(<span class="params">data</span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(data);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>æ•ˆæœä¹Ÿæ˜¯ä¸€æ ·çš„ï¼Œè¿˜è´¹åŠ²ç”¨Promiseå¹²å˜›ã€‚é‚£ä¹ˆé—®é¢˜æ¥äº†ï¼Œæœ‰å¤šå±‚å›è°ƒè¯¥æ€ä¹ˆåŠï¼Ÿå¦‚æœcallbackä¹Ÿæ˜¯ä¸€ä¸ªå¼‚æ­¥æ“ä½œï¼Œè€Œä¸”æ‰§è¡Œå®Œåä¹Ÿéœ€è¦æœ‰ç›¸åº”çš„å›è°ƒå‡½æ•°ï¼Œè¯¥æ€ä¹ˆåŠå‘¢ï¼Ÿæ€»ä¸èƒ½å†å®šä¹‰ä¸€ä¸ªcallback2ï¼Œç„¶åç»™callbackä¼ è¿›å»å§ã€‚è€ŒPromiseçš„ä¼˜åŠ¿åœ¨äºï¼Œå¯ä»¥åœ¨thenæ–¹æ³•ä¸­ç»§ç»­å†™Promiseå¯¹è±¡å¹¶è¿”å›ï¼Œç„¶åç»§ç»­è°ƒç”¨thenæ¥è¿›è¡Œå›è°ƒæ“ä½œã€‚</p><p> <strong>é“¾å¼æ“ä½œçš„ç”¨æ³•</strong></p><p>æ‰€ä»¥ï¼Œä»è¡¨é¢ä¸Šçœ‹ï¼ŒPromiseåªæ˜¯èƒ½å¤Ÿç®€åŒ–å±‚å±‚å›è°ƒçš„å†™æ³•ï¼Œè€Œå®è´¨ä¸Šï¼ŒPromiseçš„ç²¾é«“æ˜¯â€œçŠ¶æ€â€ï¼Œç”¨ç»´æŠ¤çŠ¶æ€ã€ä¼ é€’çŠ¶æ€çš„æ–¹å¼æ¥ä½¿å¾—å›è°ƒå‡½æ•°èƒ½å¤ŸåŠæ—¶è°ƒç”¨ï¼Œå®ƒæ¯”ä¼ é€’callbackå‡½æ•°è¦ç®€å•ã€çµæ´»çš„å¤šã€‚æ‰€ä»¥ä½¿ç”¨Promiseçš„æ­£ç¡®åœºæ™¯æ˜¯è¿™æ ·çš„ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">runAsync1()</span><br><span class="line">.then(<span class="function"><span class="keyword">function</span>(<span class="params">data</span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(data);</span><br><span class="line">    <span class="keyword">return</span> runAsync2();</span><br><span class="line">&#125;)</span><br><span class="line">.then(<span class="function"><span class="keyword">function</span>(<span class="params">data</span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(data);</span><br><span class="line">    <span class="keyword">return</span> runAsync3();</span><br><span class="line">&#125;)</span><br><span class="line">.then(<span class="function"><span class="keyword">function</span>(<span class="params">data</span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(data);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>è¿™æ ·èƒ½å¤ŸæŒ‰é¡ºåºï¼Œæ¯éš”ä¸¤ç§’è¾“å‡ºæ¯ä¸ªå¼‚æ­¥å›è°ƒä¸­çš„å†…å®¹ï¼Œåœ¨runAsync2ä¸­ä¼ ç»™resolveçš„æ•°æ®ï¼Œèƒ½åœ¨æ¥ä¸‹æ¥çš„thenæ–¹æ³•ä¸­æ‹¿åˆ°ã€‚è¿è¡Œç»“æœå¦‚ä¸‹ï¼š</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://images2015.cnblogs.com/blog/520134/201603/520134-20160311004311507-221152206.png" alt="img" title="">                </div>                <div class="image-caption">img</div>            </figure><h2 id="rejectçš„ç”¨æ³•"><a href="#rejectçš„ç”¨æ³•" class="headerlink" title="rejectçš„ç”¨æ³•"></a><strong>rejectçš„ç”¨æ³•</strong></h2><p>åˆ°è¿™é‡Œï¼Œä½ åº”è¯¥å¯¹â€œPromiseæ˜¯ä»€ä¹ˆç©æ„â€æœ‰äº†æœ€åŸºæœ¬çš„äº†è§£ã€‚é‚£ä¹ˆæˆ‘ä»¬æ¥ç€æ¥çœ‹çœ‹ES6çš„Promiseè¿˜æœ‰å“ªäº›åŠŸèƒ½ã€‚æˆ‘ä»¬å…‰ç”¨äº†resolveï¼Œè¿˜æ²¡ç”¨rejectå‘¢ï¼Œå®ƒæ˜¯åšä»€ä¹ˆçš„å‘¢ï¼Ÿäº‹å®ä¸Šï¼Œæˆ‘ä»¬å‰é¢çš„ä¾‹å­éƒ½æ˜¯åªæœ‰â€œæ‰§è¡ŒæˆåŠŸâ€çš„å›è°ƒï¼Œè¿˜æ²¡æœ‰â€œå¤±è´¥â€çš„æƒ…å†µï¼Œrejectçš„ä½œç”¨å°±æ˜¯æŠŠPromiseçš„çŠ¶æ€ç½®ä¸ºrejectedï¼Œè¿™æ ·æˆ‘ä»¬åœ¨thenä¸­å°±èƒ½æ•æ‰åˆ°ï¼Œç„¶åæ‰§è¡Œâ€œå¤±è´¥â€æƒ…å†µçš„å›è°ƒã€‚çœ‹ä¸‹é¢çš„ä»£ç ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">function getNumber()&#123;</span><br><span class="line">    var p = new Promise(function(resolve, reject)&#123;</span><br><span class="line">        //åšä¸€äº›å¼‚æ­¥æ“ä½œ</span><br><span class="line">        setTimeout(function()&#123;</span><br><span class="line">            var num = Math.ceil(Math.random()*10); //ç”Ÿæˆ1-10çš„éšæœºæ•°</span><br><span class="line">            if(num&lt;=5)&#123;</span><br><span class="line">                resolve(num);</span><br><span class="line">            &#125;</span><br><span class="line">            else&#123;</span><br><span class="line">                reject(&apos;æ•°å­—å¤ªå¤§äº†&apos;);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;, 2000);</span><br><span class="line">    &#125;);</span><br><span class="line">    return p;            </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">getNumber()</span><br><span class="line">.then(</span><br><span class="line">    function(data)&#123;</span><br><span class="line">        console.log(&apos;resolved&apos;);</span><br><span class="line">        console.log(data);</span><br><span class="line">    &#125;, </span><br><span class="line">    function(reason, data)&#123;</span><br><span class="line">        console.log(&apos;rejected&apos;);</span><br><span class="line">        console.log(reason);</span><br><span class="line">    &#125;</span><br><span class="line">);</span><br></pre></td></tr></table></figure><p>getNumberå‡½æ•°ç”¨æ¥å¼‚æ­¥è·å–ä¸€ä¸ªæ•°å­—ï¼Œ2ç§’åæ‰§è¡Œå®Œæˆï¼Œå¦‚æœæ•°å­—å°äºç­‰äº5ï¼Œæˆ‘ä»¬è®¤ä¸ºæ˜¯â€œæˆåŠŸâ€äº†ï¼Œè°ƒç”¨resolveä¿®æ”¹Promiseçš„çŠ¶æ€ã€‚å¦åˆ™æˆ‘ä»¬è®¤ä¸ºæ˜¯â€œå¤±è´¥â€äº†ï¼Œè°ƒç”¨rejectå¹¶ä¼ é€’ä¸€ä¸ªå‚æ•°ï¼Œä½œä¸ºå¤±è´¥çš„åŸå› ã€‚</p><p>è¿è¡ŒgetNumberå¹¶ä¸”åœ¨thenä¸­ä¼ äº†ä¸¤ä¸ªå‚æ•°ï¼Œthenæ–¹æ³•å¯ä»¥æ¥å—ä¸¤ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªå¯¹åº”resolveçš„å›è°ƒï¼Œç¬¬äºŒä¸ªå¯¹åº”rejectçš„å›è°ƒã€‚æ‰€ä»¥æˆ‘ä»¬èƒ½å¤Ÿåˆ†åˆ«æ‹¿åˆ°ä»–ä»¬ä¼ è¿‡æ¥çš„æ•°æ®ã€‚å¤šæ¬¡è¿è¡Œè¿™æ®µä»£ç ï¼Œä½ ä¼šéšæœºå¾—åˆ°ä¸‹é¢ä¸¤ç§ç»“æœï¼š</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://images2015.cnblogs.com/blog/520134/201603/520134-20160311004616257-1024778840.png" alt="img](https://images2015.cnblogs.com/blog/520134/201603/520134-20160311004607960-1156803894.png)æˆ–è€…![img" title="">                </div>                <div class="image-caption">img](https://images2015.cnblogs.com/blog/520134/201603/520134-20160311004607960-1156803894.png)æˆ–è€…![img</div>            </figure><h2 id="catchçš„ç”¨æ³•"><a href="#catchçš„ç”¨æ³•" class="headerlink" title="catchçš„ç”¨æ³•"></a><strong>catchçš„ç”¨æ³•</strong></h2><p>æˆ‘ä»¬çŸ¥é“Promiseå¯¹è±¡é™¤äº†thenæ–¹æ³•ï¼Œè¿˜æœ‰ä¸€ä¸ªcatchæ–¹æ³•ï¼Œå®ƒæ˜¯åšä»€ä¹ˆç”¨çš„å‘¢ï¼Ÿå…¶å®å®ƒå’Œthençš„ç¬¬äºŒä¸ªå‚æ•°ä¸€æ ·ï¼Œç”¨æ¥æŒ‡å®šrejectçš„å›è°ƒï¼Œç”¨æ³•æ˜¯è¿™æ ·ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">getNumber()</span><br><span class="line">.then(function(data)&#123;</span><br><span class="line">    console.log(&apos;resolved&apos;);</span><br><span class="line">    console.log(data);</span><br><span class="line">&#125;)</span><br><span class="line">.catch(function(reason)&#123;</span><br><span class="line">    console.log(&apos;rejected&apos;);</span><br><span class="line">    console.log(reason);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>æ•ˆæœå’Œå†™åœ¨thençš„ç¬¬äºŒä¸ªå‚æ•°é‡Œé¢ä¸€æ ·ã€‚ä¸è¿‡å®ƒè¿˜æœ‰å¦å¤–ä¸€ä¸ªä½œç”¨ï¼šåœ¨æ‰§è¡Œresolveçš„å›è°ƒï¼ˆä¹Ÿå°±æ˜¯ä¸Šé¢thenä¸­çš„ç¬¬ä¸€ä¸ªå‚æ•°ï¼‰æ—¶ï¼Œå¦‚æœæŠ›å‡ºå¼‚å¸¸äº†ï¼ˆä»£ç å‡ºé”™äº†ï¼‰ï¼Œé‚£ä¹ˆå¹¶ä¸ä¼šæŠ¥é”™å¡æ­»jsï¼Œè€Œæ˜¯ä¼šè¿›åˆ°è¿™ä¸ªcatchæ–¹æ³•ä¸­ã€‚è¯·çœ‹ä¸‹é¢çš„ä»£ç ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">getNumber()</span><br><span class="line">.then(function(data)&#123;</span><br><span class="line">    console.log(&apos;resolved&apos;);</span><br><span class="line">    console.log(data);</span><br><span class="line">    console.log(somedata); //æ­¤å¤„çš„somedataæœªå®šä¹‰</span><br><span class="line">&#125;)</span><br><span class="line">.catch(function(reason)&#123;</span><br><span class="line">    console.log(&apos;rejected&apos;);</span><br><span class="line">    console.log(reason);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>åœ¨resolveçš„å›è°ƒä¸­ï¼Œæˆ‘ä»¬console.log(somedata);è€Œsomedataè¿™ä¸ªå˜é‡æ˜¯æ²¡æœ‰è¢«å®šä¹‰çš„ã€‚å¦‚æœæˆ‘ä»¬ä¸ç”¨Promiseï¼Œä»£ç è¿è¡Œåˆ°è¿™é‡Œå°±ç›´æ¥åœ¨æ§åˆ¶å°æŠ¥é”™äº†ï¼Œä¸å¾€ä¸‹è¿è¡Œäº†ã€‚ä½†æ˜¯åœ¨è¿™é‡Œï¼Œä¼šå¾—åˆ°è¿™æ ·çš„ç»“æœï¼š</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://images2015.cnblogs.com/blog/520134/201603/520134-20160311004747147-1508291069.png" alt="img" title="">                </div>                <div class="image-caption">img</div>            </figure><p>ä¹Ÿå°±æ˜¯è¯´è¿›åˆ°catchæ–¹æ³•é‡Œé¢å»äº†ï¼Œè€Œä¸”æŠŠé”™è¯¯åŸå› ä¼ åˆ°äº†reasonå‚æ•°ä¸­ã€‚å³ä¾¿æ˜¯æœ‰é”™è¯¯çš„ä»£ç ä¹Ÿä¸ä¼šæŠ¥é”™äº†ï¼Œè¿™ä¸æˆ‘ä»¬çš„try/catchè¯­å¥æœ‰ç›¸åŒçš„åŠŸèƒ½ã€‚</p><h2 id="allçš„ç”¨æ³•"><a href="#allçš„ç”¨æ³•" class="headerlink" title="allçš„ç”¨æ³•"></a><strong>allçš„ç”¨æ³•</strong></h2><p>Promiseçš„allæ–¹æ³•æä¾›äº†å¹¶è¡Œæ‰§è¡Œå¼‚æ­¥æ“ä½œçš„èƒ½åŠ›ï¼Œå¹¶ä¸”åœ¨æ‰€æœ‰å¼‚æ­¥æ“ä½œæ‰§è¡Œå®Œåæ‰æ‰§è¡Œå›è°ƒã€‚æˆ‘ä»¬ä»æ—§ä½¿ç”¨ä¸Šé¢å®šä¹‰å¥½çš„runAsync1ã€runAsync2ã€runAsync3è¿™ä¸‰ä¸ªå‡½æ•°ï¼Œçœ‹ä¸‹é¢çš„ä¾‹å­ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Promise</span><br><span class="line">.all([runAsync1(), runAsync2(), runAsync3()])</span><br><span class="line">.then(function(results)&#123;</span><br><span class="line">    console.log(results);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>ç”¨Promise.allæ¥æ‰§è¡Œï¼Œallæ¥æ”¶ä¸€ä¸ªæ•°ç»„å‚æ•°ï¼Œé‡Œé¢çš„å€¼æœ€ç»ˆéƒ½ç®—è¿”å›Promiseå¯¹è±¡ã€‚è¿™æ ·ï¼Œä¸‰ä¸ªå¼‚æ­¥æ“ä½œçš„å¹¶è¡Œæ‰§è¡Œçš„ï¼Œç­‰åˆ°å®ƒä»¬éƒ½æ‰§è¡Œå®Œåæ‰ä¼šè¿›åˆ°thené‡Œé¢ã€‚é‚£ä¹ˆï¼Œä¸‰ä¸ªå¼‚æ­¥æ“ä½œè¿”å›çš„æ•°æ®å“ªé‡Œå»äº†å‘¢ï¼Ÿéƒ½åœ¨thené‡Œé¢å‘¢ï¼Œallä¼šæŠŠæ‰€æœ‰å¼‚æ­¥æ“ä½œçš„ç»“æœæ”¾è¿›ä¸€ä¸ªæ•°ç»„ä¸­ä¼ ç»™thenï¼Œå°±æ˜¯ä¸Šé¢çš„resultsã€‚æ‰€ä»¥ä¸Šé¢ä»£ç çš„è¾“å‡ºç»“æœå°±æ˜¯ï¼š</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://images2015.cnblogs.com/blog/520134/201603/520134-20160311004843491-346782307.png" alt="img" title="">                </div>                <div class="image-caption">img</div>            </figure><p>æœ‰äº†allï¼Œä½ å°±å¯ä»¥å¹¶è¡Œæ‰§è¡Œå¤šä¸ªå¼‚æ­¥æ“ä½œï¼Œå¹¶ä¸”åœ¨ä¸€ä¸ªå›è°ƒä¸­å¤„ç†æ‰€æœ‰çš„è¿”å›æ•°æ®ï¼Œæ˜¯ä¸æ˜¯å¾ˆé…·ï¼Ÿæœ‰ä¸€ä¸ªåœºæ™¯æ˜¯å¾ˆé€‚åˆç”¨è¿™ä¸ªçš„ï¼Œä¸€äº›æ¸¸æˆç±»çš„ç´ ææ¯”è¾ƒå¤šçš„åº”ç”¨ï¼Œæ‰“å¼€ç½‘é¡µæ—¶ï¼Œé¢„å…ˆåŠ è½½éœ€è¦ç”¨åˆ°çš„å„ç§èµ„æºå¦‚å›¾ç‰‡ã€flashä»¥åŠå„ç§é™æ€æ–‡ä»¶ã€‚æ‰€æœ‰çš„éƒ½åŠ è½½å®Œåï¼Œæˆ‘ä»¬å†è¿›è¡Œé¡µé¢çš„åˆå§‹åŒ–ã€‚</p><h2 id="raceçš„ç”¨æ³•"><a href="#raceçš„ç”¨æ³•" class="headerlink" title="raceçš„ç”¨æ³•"></a><strong>raceçš„ç”¨æ³•</strong></h2><p>allæ–¹æ³•çš„æ•ˆæœå®é™…ä¸Šæ˜¯ã€Œè°è·‘çš„æ…¢ï¼Œä»¥è°ä¸ºå‡†æ‰§è¡Œå›è°ƒã€ï¼Œé‚£ä¹ˆç›¸å¯¹çš„å°±æœ‰å¦ä¸€ä¸ªæ–¹æ³•ã€Œè°è·‘çš„å¿«ï¼Œä»¥è°ä¸ºå‡†æ‰§è¡Œå›è°ƒã€ï¼Œè¿™å°±æ˜¯raceæ–¹æ³•ï¼Œè¿™ä¸ªè¯æœ¬æ¥å°±æ˜¯èµ›è·‘çš„æ„æ€ã€‚raceçš„ç”¨æ³•ä¸allä¸€æ ·ï¼Œæˆ‘ä»¬æŠŠä¸Šé¢runAsync1çš„å»¶æ—¶æ”¹ä¸º1ç§’æ¥çœ‹ä¸€ä¸‹ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Promise</span><br><span class="line">.race([runAsync1(), runAsync2(), runAsync3()])</span><br><span class="line">.then(function(results)&#123;</span><br><span class="line">    console.log(results);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>è¿™ä¸‰ä¸ªå¼‚æ­¥æ“ä½œåŒæ ·æ˜¯å¹¶è¡Œæ‰§è¡Œçš„ã€‚ç»“æœä½ åº”è¯¥å¯ä»¥çŒœåˆ°ï¼Œ1ç§’årunAsync1å·²ç»æ‰§è¡Œå®Œäº†ï¼Œæ­¤æ—¶thené‡Œé¢çš„å°±æ‰§è¡Œäº†ã€‚ç»“æœæ˜¯è¿™æ ·çš„ï¼š</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://images2015.cnblogs.com/blog/520134/201603/520134-20160311004946022-706413123.png" alt="img" title="">                </div>                <div class="image-caption">img</div>            </figure><p>ä½ çŒœå¯¹äº†å—ï¼Ÿä¸å®Œå…¨ï¼Œæ˜¯å§ã€‚åœ¨thené‡Œé¢çš„å›è°ƒå¼€å§‹æ‰§è¡Œæ—¶ï¼ŒrunAsync2()å’ŒrunAsync3()å¹¶æ²¡æœ‰åœæ­¢ï¼Œä»æ—§å†æ‰§è¡Œã€‚äºæ˜¯å†è¿‡1ç§’åï¼Œè¾“å‡ºäº†ä»–ä»¬ç»“æŸçš„æ ‡å¿—ã€‚</p><p>è¿™ä¸ªraceæœ‰ä»€ä¹ˆç”¨å‘¢ï¼Ÿä½¿ç”¨åœºæ™¯è¿˜æ˜¯å¾ˆå¤šçš„ï¼Œæ¯”å¦‚æˆ‘ä»¬å¯ä»¥ç”¨raceç»™æŸä¸ªå¼‚æ­¥è¯·æ±‚è®¾ç½®è¶…æ—¶æ—¶é—´ï¼Œå¹¶ä¸”åœ¨è¶…æ—¶åæ‰§è¡Œç›¸åº”çš„æ“ä½œï¼Œä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">//è¯·æ±‚æŸä¸ªå›¾ç‰‡èµ„æº</span><br><span class="line">function requestImg()&#123;</span><br><span class="line">    var p = new Promise(function(resolve, reject)&#123;</span><br><span class="line">        var img = new Image();</span><br><span class="line">        img.onload = function()&#123;</span><br><span class="line">            resolve(img);</span><br><span class="line">        &#125;</span><br><span class="line">        img.src = &apos;xxxxxx&apos;;</span><br><span class="line">    &#125;);</span><br><span class="line">    return p;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">//å»¶æ—¶å‡½æ•°ï¼Œç”¨äºç»™è¯·æ±‚è®¡æ—¶</span><br><span class="line">function timeout()&#123;</span><br><span class="line">    var p = new Promise(function(resolve, reject)&#123;</span><br><span class="line">        setTimeout(function()&#123;</span><br><span class="line">            reject(&apos;å›¾ç‰‡è¯·æ±‚è¶…æ—¶&apos;);</span><br><span class="line">        &#125;, 5000);</span><br><span class="line">    &#125;);</span><br><span class="line">    return p;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Promise</span><br><span class="line">.race([requestImg(), timeout()])</span><br><span class="line">.then(function(results)&#123;</span><br><span class="line">    console.log(results);</span><br><span class="line">&#125;)</span><br><span class="line">.catch(function(reason)&#123;</span><br><span class="line">    console.log(reason);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>requestImgå‡½æ•°ä¼šå¼‚æ­¥è¯·æ±‚ä¸€å¼ å›¾ç‰‡ï¼Œæˆ‘æŠŠåœ°å€å†™ä¸ºâ€xxxxxxâ€ï¼Œæ‰€ä»¥è‚¯å®šæ˜¯æ— æ³•æˆåŠŸè¯·æ±‚åˆ°çš„ã€‚timeoutå‡½æ•°æ˜¯ä¸€ä¸ªå»¶æ—¶5ç§’çš„å¼‚æ­¥æ“ä½œã€‚æˆ‘ä»¬æŠŠè¿™ä¸¤ä¸ªè¿”å›Promiseå¯¹è±¡çš„å‡½æ•°æ”¾è¿›raceï¼Œäºæ˜¯ä»–ä¿©å°±ä¼šèµ›è·‘ï¼Œå¦‚æœ5ç§’ä¹‹å†…å›¾ç‰‡è¯·æ±‚æˆåŠŸäº†ï¼Œé‚£ä¹ˆéè¿›å…¥thenæ–¹æ³•ï¼Œæ‰§è¡Œæ­£å¸¸çš„æµç¨‹ã€‚å¦‚æœ5ç§’é’Ÿå›¾ç‰‡è¿˜æœªæˆåŠŸè¿”å›ï¼Œé‚£ä¹ˆtimeoutå°±è·‘èµ¢äº†ï¼Œåˆ™è¿›å…¥catchï¼ŒæŠ¥å‡ºâ€œå›¾ç‰‡è¯·æ±‚è¶…æ—¶â€çš„ä¿¡æ¯ã€‚è¿è¡Œç»“æœå¦‚ä¸‹ï¼š</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;ES6-Promise-ç”¨æ³•è®²è§£&quot;&gt;&lt;a href=&quot;#ES6-Promise-ç”¨æ³•è®²è§£&quot; class=&quot;headerlink&quot; title=&quot;ES6 Promise ç”¨æ³•è®²è§£&quot;&gt;&lt;/a&gt;&lt;a href=&quot;https://www.cnblogs.com/whybx
      
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>é¢åŒ…å±‘å¯¼èˆª</title>
    <link href="https://tianjiec.top/2018/12/19/%E9%9D%A2%E5%8C%85%E5%B1%91%E5%AF%BC%E8%88%AA/"/>
    <id>https://tianjiec.top/2018/12/19/é¢åŒ…å±‘å¯¼èˆª/</id>
    <published>2018-12-19T11:27:56.000Z</published>
    <updated>2018-12-19T11:32:35.426Z</updated>
    
    <content type="html"><![CDATA[<p>é¢åŒ…å±‘<a href="https://baike.baidu.com/item/%E5%AF%BC%E8%88%AA" target="_blank" rel="noopener">å¯¼èˆª</a>(BreadcrumbNavigation)è¿™ä¸ªæ¦‚å¿µæ¥è‡ªç«¥è¯æ•…äº‹â€<a href="https://baike.baidu.com/item/%E6%B1%89%E8%B5%9B%E5%B0%94" target="_blank" rel="noopener">æ±‰èµ›å°”</a>å’Œ<a href="https://baike.baidu.com/item/%E6%A0%BC%E8%8E%B1%E7%89%B9" target="_blank" rel="noopener">æ ¼è±ç‰¹</a>â€œï¼Œå½“æ±‰èµ›å°”å’Œæ ¼è±ç‰¹ç©¿è¿‡æ£®æ—æ—¶ï¼Œä¸å°å¿ƒè¿·è·¯äº†ï¼Œä½†æ˜¯ä»–ä»¬å‘ç°åœ¨æ²¿é€”èµ°è¿‡çš„åœ°æ–¹éƒ½æ’’ä¸‹äº†é¢åŒ…å±‘ï¼Œè®©è¿™äº›é¢åŒ…å±‘æ¥å¸®åŠ©ä»–ä»¬æ‰¾åˆ°å›å®¶çš„è·¯ã€‚æ‰€ä»¥ï¼Œé¢åŒ…å±‘å¯¼èˆªçš„ä½œç”¨æ˜¯å‘Šè¯‰<a href="https://baike.baidu.com/item/%E8%AE%BF%E9%97%AE%E8%80%85/2774711" target="_blank" rel="noopener">è®¿é—®è€…</a>ä»–ä»¬ç›®å‰åœ¨ç½‘ç«™ä¸­çš„ä½ç½®ä»¥åŠå¦‚ä½•è¿”å›ã€‚</p><p>ä¸»é¡µ &gt;æ ç›®é¡µ&gt;æ–‡ç« é¡µé¢</p><p>å°å‹ç«™ç‚¹ä¾¿äºä¼˜åŒ–ï¼Œå¯ä»¥æŠŠä¸»é¡µæ”¹æˆä½ çš„å…³é”®è¯ï¼Œç›®çš„æ˜¯å…³é”®è¯é›†æƒäºé¦–é¡µã€‚</p><p>å…³é”®è¯&gt;<a href="https://baike.baidu.com/item/%E6%A0%8F%E7%9B%AE%E9%A1%B5" target="_blank" rel="noopener">æ ç›®é¡µ</a>&gt;æ–‡ç« é¡µéå¸¸æ¸…æ™°ï¼Œä¸”ä¸å­˜åœ¨äº¤å‰ï¼›å¦åˆ™ï¼Œé¢åŒ…å±‘å¯¼èˆªçš„è·¯å¾„</p><h3 id="ä½œç”¨"><a href="#ä½œç”¨" class="headerlink" title="ä½œç”¨"></a>ä½œç”¨</h3><p>1ã€è®©ç”¨æˆ·äº†è§£å½“å‰æ‰€å¤„ä½ç½®ï¼Œä»¥åŠå½“å‰é¡µé¢åœ¨æ•´ä¸ªç½‘ç«™ä¸­çš„ä½ç½®ã€‚</p><p>2ã€ä½“ç°äº†ç½‘ç«™çš„æ¶æ„å±‚çº§ï¼Œèƒ½å¤Ÿå¸®åŠ©ç”¨æˆ·å¿«é€Ÿå­¦ä¹ å’Œäº†è§£ç½‘ç«™å†…å®¹å’Œç»„ç»‡æ–¹å¼ï¼Œä»è€Œå½¢æˆå¾ˆå¥½çš„ä½ç½®æ„Ÿã€‚</p><p>3ã€æä¾›è¿”å›å„ä¸ªå±‚çº§çš„å¿«é€Ÿå…¥å£ï¼Œæ–¹ä¾¿ç”¨æˆ·æ“ä½œã€‚</p><p>4ã€<a href="https://baike.baidu.com/item/Google" target="_blank" rel="noopener">Google</a>å·²ç»å°†é¢åŒ…å±‘å¯¼èˆªæ•´åˆåˆ°æœç´¢ç»“æœé‡Œé¢ï¼Œå› æ­¤ä¼˜åŒ–é¢åŒ…å±‘å¯¼èˆªæ¯ä¸ªå±‚çº§çš„åç§°ï¼Œå¤šä½¿ç”¨å…³é”®å­—ï¼Œéƒ½å¯ä»¥å®ç°SEOä¼˜åŒ–ã€‚é¢åŒ…å±‘è·¯å¾„ï¼Œå¯¹äºæé«˜ç”¨æˆ·ä½“éªŒæ¥è¯´ï¼Œæ˜¯å¾ˆæœ‰å¸®åŠ©çš„ã€‚</p><p>5ã€æ–¹ä¾¿ç”¨æˆ·ï¼Œé¢åŒ…å±‘ä¸»è¦ç”¨äºä¸ºç”¨æˆ·æä¾›å¯¼èˆªä¸€ä¸ªç½‘ç«™çš„æ¬¡è¦æ–¹æ³•ï¼Œé€šè¿‡ä¸ºä¸€ä¸ªå¤§å‹å¤šçº§ç½‘ç«™çš„æ‰€æœ‰é¡µé¢æä¾›é¢åŒ…å±‘è·¯å¾„ï¼Œç”¨æˆ·å¯ä»¥æ›´å®¹æ˜“çš„å®šä½åˆ°ä¸Šä¸€æ¬¡ç›®å½•ï¼Œå¼•å¯¼ç”¨æˆ·é€šè¡Œï¼›</p><p>6ã€å‡å°‘è¿”å›åˆ°ä¸Šä¸€çº§é¡µé¢çš„ç‚¹å‡»æˆ–æ“ä½œï¼Œä¸ç”¨ä½¿ç”¨æµè§ˆå™¨çš„â€œè¿”å›â€æŒ‰é’®æˆ–ç½‘ç«™çš„ä¸»è¦å¯¼èˆªæ¥è¿”å›åˆ°ä¸Šä¸€çº§é¡µé¢ï¼›</p><p>7ã€ä¸ç”¨å¸¸å¸¸å ç”¨å±å¹•ç©ºé—´ï¼Œå› ä¸ºå®ƒä»¬é€šå¸¸æ˜¯æ°´å¹³æ’åˆ—ä»¥åŠç®€å•çš„æ ·å¼ï¼Œé¢åŒ…å±‘è·¯å¾„ä¸ä¼šå ç”¨é¡µé¢å¤ªå¤šçš„ç©ºé—´ã€‚è¿™æ ·çš„å¥½å¤„æ˜¯ï¼Œä»å†…å®¹è¿‡è½½æ–¹é¢æ¥è¯´ï¼Œä»–ä»¬å‡ ä¹æ²¡æœ‰ä»»ä½•è´Ÿé¢å½±å“ï¼›</p><p>8ã€é™ä½<a href="https://baike.baidu.com/item/%E8%B7%B3%E5%87%BA%E7%8E%87" target="_blank" rel="noopener">è·³å‡ºç‡</a>ï¼Œé¢åŒ…å±‘è·¯å¾„ä¼šæ˜¯ä¸€ä¸ªè¯±æƒ‘é¦–æ¬¡è®¿é—®è€…åœ¨è¿›å…¥ä¸€ä¸ªé¡µé¢åå»æµè§ˆè¿™ä¸ªç½‘ç«™çš„éå¸¸å¥½çš„æ–¹æ³•ã€‚æ¯”å¦‚è¯´ï¼Œä¸€ä¸ªç”¨æˆ·é€šè¿‡è°·æ­Œæœç´¢åˆ°ä¸€ä¸ªé¡µé¢ï¼Œç„¶åçœ‹åˆ°ä¸€ä¸ªé¢åŒ…å±‘è·¯å¾„ï¼Œè¿™å°†ä¼šè¯±ä½¿ç”¨æˆ·ç‚¹å‡»ä¸Šä¸€çº§é¡µé¢å»æµè§ˆæ„Ÿå…´è¶£çš„ç›¸å…³ä¸»é¢˜ã€‚è¿™æ ·ï¼Œä»è€Œï¼Œå¯ä»¥é™ä½ç½‘ç«™çš„æ€»ä½“è·³å‡ºç‡ã€‚</p><p>9ã€æœ‰åˆ©äºç™¾åº¦èœ˜è››å¯¹ç½‘ç«™çš„æŠ“å–ï¼Œèœ˜è››ç›´æ¥æ²¿ç€é‚£ä¸ªé“¾èµ°å°±å¯ä»¥äº†ï¼Œå¾ˆæ–¹ä¾¿ã€‚</p><p>10ã€é¢åŒ…å±‘æœ‰åˆ©äºç½‘ç«™<a href="https://baike.baidu.com/item/%E5%86%85%E9%93%BE" target="_blank" rel="noopener">å†…é“¾</a>çš„å»ºè®¾ï¼Œç”¨é¢åŒ…å±‘å¤§å¤§å¢åŠ äº†ç½‘ç«™çš„å†…éƒ¨è¿æ¥ï¼Œæé«˜ç”¨æˆ·ä½“éªŒã€‚</p><h3 id="é€‚ç”¨æ¡ä»¶"><a href="#é€‚ç”¨æ¡ä»¶" class="headerlink" title="é€‚ç”¨æ¡ä»¶"></a>é€‚ç”¨æ¡ä»¶</h3><p>è™½ç„¶çœ¼ä¸‹å¾ˆå¤šç½‘ç«™éƒ½æµè¡Œä½¿ç”¨é¢åŒ…å±‘å¯¼èˆªï¼Œä½†æ˜¯å¹¶ä¸æ˜¯æ‰€æœ‰çš„ç½‘ç«™éƒ½é€‚ç”¨ã€‚ç¬¦åˆä¸‹é¢ä¸¤ä¸ªæ¡ä»¶çš„ç½‘ç«™æ‰é€‚åˆä½¿ç”¨é¢åŒ…å±‘å¯¼èˆªã€‚1ã€å±‚çº§è¾ƒæ·±çš„ç½‘ç«™ï¼Œé¢åŒ…å±‘å¯¼èˆªé€‚åˆå±‚çº§è¾ƒæ·±çš„ç½‘ç«™ï¼Œå¦‚æœåªæœ‰ä¸€çº§åˆ†ç±»çš„è¯ï¼Œé€šè¿‡ä¸»å¯¼èˆªå°±å¯ä»¥èµ·åˆ°å¿«é€Ÿå®šä½çš„ä½œç”¨ã€‚æ¯”å¦‚â€œ<a href="https://baike.baidu.com/item/%E8%B1%86%E7%93%A3%E7%BD%91" target="_blank" rel="noopener">è±†ç“£ç½‘</a>â€ç±»å‹æ‰å¹³æ„æ¶çš„ç½‘ç«™å°±æ²¡æœ‰ä½¿ç”¨é¢åŒ…å±‘å¯¼èˆªã€‚2ã€ç‹¬ç«‹ä¸äº¤å‰çš„<a href="https://baike.baidu.com/item/%E7%BD%91%E7%AB%99%E7%BB%93%E6%9E%84" target="_blank" rel="noopener">ç½‘ç«™ç»“æ„</a>ï¼Œç”±äºé¢åŒ…å±‘ç½‘ç«™å¯¼èˆªè·¯å¾„æ˜¯çº¿æ€§ç»“æ„çš„ï¼Œå› æ­¤ç½‘ç«™å†…å®¹å¿…é¡»åˆ’åˆ†çš„éå¸¸æ¸…æ™°ï¼Œä¸”ä¸å­˜åœ¨äº¤å‰ï¼›å¦åˆ™ï¼Œé¢åŒ…å±‘å¯¼èˆªçš„è·¯å¾„å°±ä¸æ˜¯å”¯ä¸€çš„ï¼ŒåŒä¸€åˆ†ç±»å¯èƒ½å‡ºç°åœ¨ä¸åŒçš„è·¯å¾„ä¸­ï¼Œè®©ç”¨æˆ·æ„Ÿåˆ°å›°æƒ‘ã€‚</p><h2 id="åˆ†ç±»"><a href="#åˆ†ç±»" class="headerlink" title="åˆ†ç±»"></a>åˆ†ç±»</h2><p>ç¼–è¾‘</p><p>ä¸€ã€åŸºäºä½ç½®çš„é¢åŒ…å±‘å¯¼èˆª</p><p>è¿™ç§ç±»å‹æ˜¯æœ€å¸¸è§çš„ã€‚è¿™ç§ç±»å‹çš„é¢åŒ…å±‘å¯¼èˆªå¯ä»¥å¾ˆå¥½çš„æŒ‡å‡ºå½“å‰é¡µé¢ä¸æ•´ä¸ªç«™ç‚¹çš„å±‚æ¬¡ç»“æ„ã€‚è¿™ç§é¢åŒ…å±‘å¯¼èˆªå¯ä»¥æ˜¾ç¤ºå½“å‰é¡µé¢çš„å‰ä¸€ä¸ªé¡µé¢æˆ–è€…ç›®å½•çš„<a href="https://baike.baidu.com/item/%E9%93%BE%E6%8E%A5" target="_blank" rel="noopener">é“¾æ¥</a>ã€‚å¯ä»¥ä½¿è®¿å®¢äº†è§£è‡ªå·±çš„ä½ç½®ï¼Œä»¥åŠå¯ä»¥æ›´å¿«çš„æ‰¾åˆ°è‡ªå·±æƒ³è¦åˆ°è¾¾çš„é¡µé¢ã€‚å¯ä»¥å¾ˆå¥½çš„æé«˜ç”¨æˆ·çš„å‹å¥½ä½“éªŒã€‚</p><p>äºŒã€åŸºäºå±æ€§çš„é¢åŒ…å±‘å¯¼èˆª</p><p>è¿™ç§é¢åŒ…å±‘å¯¼èˆªæœ€å¸¸å‡ºç°åœ¨ç”µå­å•†åŠ¡ç«™ç‚¹ã€‚è¿™ç§é¢åŒ…å±‘å¯¼èˆªå¯ä»¥å¾ˆå¥½çš„æŒ‡å‡ºå½“å‰é¡µé¢å†…äº§å“çš„å…¶ä»–å±æ€§æˆ–è€…ç±»åˆ«ã€‚å¯¹äºä¸€ä¸ªäº§å“æ¥è¯´ï¼Œæ‰€å…·æœ‰çš„å±æ€§å¾€å¾€ä¸åªæœ‰ä¸€ç§ï¼Œè€Œé€šè¿‡è¿™ç§é¢åŒ…å±‘å¯¼èˆªå¯ä»¥ç»™æ¶ˆè´¹è€…ä¸€ä¸ªæ›´åŠ ç›´è§‚çš„äº†è§£ã€‚</p><p>ä¸‰ã€åŸºäºè·¯å¾„çš„é¢åŒ…å±‘å¯¼èˆª</p><p>è¿™ç§é¢åŒ…å±‘å¯¼èˆªæ˜¯æœ€ä¸å¸¸è§åˆ°çš„ã€‚è¿™ç§é¢åŒ…å±‘å¯¼èˆªå’Œä¸Šæ–‡æ‰€è¯´çš„ç«¥è¯æ•…äº‹ç±»å‹å¾ˆåƒã€‚ä»–ä»¬å¯ä»¥æ˜¾ç¤ºè®¿å®¢åœ¨åˆ°è¾¾é¡µé¢å‰æ‰€è®¿é—®è¿‡çš„<a href="https://baike.baidu.com/item/%E7%BD%91%E9%A1%B5" target="_blank" rel="noopener">ç½‘é¡µ</a>çš„é“¾æ¥ã€‚è¿™ç§é¢åŒ…å±‘å¯¼èˆªä¸æ˜¯å¾ˆå—æ¬¢è¿ï¼Œå› ä¸ºä»–ä»¬çš„åŠŸèƒ½åŸºæœ¬ä¸Šæ˜¯å’Œå‰è¿›å’Œåé€€çš„æŒ‰é’®æ˜¯ä¸€æ ·çš„</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;é¢åŒ…å±‘&lt;a href=&quot;https://baike.baidu.com/item/%E5%AF%BC%E8%88%AA&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;å¯¼èˆª&lt;/a&gt;(BreadcrumbNavigation)è¿™ä¸ªæ¦‚å¿µæ¥è‡ªç«¥è¯æ•…äº‹â€&lt;a hre
      
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>é¢è¯•é¢˜</title>
    <link href="https://tianjiec.top/2018/12/18/%E9%9D%A2%E8%AF%95%E9%A2%98/"/>
    <id>https://tianjiec.top/2018/12/18/é¢è¯•é¢˜/</id>
    <published>2018-12-18T01:21:11.000Z</published>
    <updated>2018-12-20T01:54:04.786Z</updated>
    
    <content type="html"><![CDATA[<h4 id="1ã€ä½ åšçš„é¡µé¢åœ¨é‚£äº›æµè§ˆå™¨æµ‹è¯•è¿‡ï¼Ÿè¿™äº›æµè§ˆå™¨çš„å†…æ ¸åˆ†åˆ«æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#1ã€ä½ åšçš„é¡µé¢åœ¨é‚£äº›æµè§ˆå™¨æµ‹è¯•è¿‡ï¼Ÿè¿™äº›æµè§ˆå™¨çš„å†…æ ¸åˆ†åˆ«æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="1ã€ä½ åšçš„é¡µé¢åœ¨é‚£äº›æµè§ˆå™¨æµ‹è¯•è¿‡ï¼Ÿè¿™äº›æµè§ˆå™¨çš„å†…æ ¸åˆ†åˆ«æ˜¯ä»€ä¹ˆï¼Ÿ"></a>1ã€ä½ åšçš„é¡µé¢åœ¨é‚£äº›æµè§ˆå™¨æµ‹è¯•è¿‡ï¼Ÿè¿™äº›æµè§ˆå™¨çš„å†…æ ¸åˆ†åˆ«æ˜¯ä»€ä¹ˆï¼Ÿ</h4><p>IEï¼štridentå†…æ ¸</p><p>Firefoxï¼šgeckoå†…æ ¸</p><p>Safariï¼šwebkitå†…æ ¸</p><p>Operaï¼šä»¥å‰æ˜¯prestoå†…æ ¸ï¼Œç°åœ¨æ”¹ç”¨Googleçš„Chromeçš„blinkå†…æ ¸</p><p>Chromeï¼šblinkï¼ˆåŸºäºwebkitï¼ŒGoogleä¸Operaå…±åŒå¼€å‘ï¼‰</p><h4 id="2ã€æ¯ä¸ªHTMLæ–‡ä»¶é‡Œå¼€å¤´éƒ½æœ‰ä¸€ä¸ªå¾ˆé‡è¦çš„ä¸œè¥¿ï¼ŒDoctypeï¼ŒçŸ¥é“è¿™æ˜¯å¹²ä»€ä¹ˆçš„å—ï¼Ÿ"><a href="#2ã€æ¯ä¸ªHTMLæ–‡ä»¶é‡Œå¼€å¤´éƒ½æœ‰ä¸€ä¸ªå¾ˆé‡è¦çš„ä¸œè¥¿ï¼ŒDoctypeï¼ŒçŸ¥é“è¿™æ˜¯å¹²ä»€ä¹ˆçš„å—ï¼Ÿ" class="headerlink" title="2ã€æ¯ä¸ªHTMLæ–‡ä»¶é‡Œå¼€å¤´éƒ½æœ‰ä¸€ä¸ªå¾ˆé‡è¦çš„ä¸œè¥¿ï¼ŒDoctypeï¼ŒçŸ¥é“è¿™æ˜¯å¹²ä»€ä¹ˆçš„å—ï¼Ÿ"></a>2ã€æ¯ä¸ªHTMLæ–‡ä»¶é‡Œå¼€å¤´éƒ½æœ‰ä¸€ä¸ªå¾ˆé‡è¦çš„ä¸œè¥¿ï¼ŒDoctypeï¼ŒçŸ¥é“è¿™æ˜¯å¹²ä»€ä¹ˆçš„å—ï¼Ÿ</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE&gt;</span> å£°æ˜äºæ–‡æ¡£ä¸­çš„æœ€å‰é¢çš„ä½ç½®ï¼Œå¤„äº<span class="tag">&lt;<span class="name">html</span>&gt;</span> æ ‡ç­¾ä¹‹å‰ã€‚æ­¤æ ‡ç­¾å¯å‘ŠçŸ¥æµè§ˆå™¨æ–‡æ¡£ä½¿ç”¨å“ªç§HTML æˆ– XHTML è§„èŒƒã€‚ï¼ˆé‡ç‚¹ï¼šå‘Šè¯‰æµè§ˆå™¨æŒ‰ç…§ä½•ç§è§„èŒƒè§£æé¡µé¢ï¼‰</span><br></pre></td></tr></table></figure><h4 id="3ã€Quirks-æ¨¡å¼-æ˜¯ä»€ä¹ˆï¼Ÿ-ä»–å’ŒStandardsæ¨¡å¼æœ‰ä»€ä¹ˆåŒºåˆ«"><a href="#3ã€Quirks-æ¨¡å¼-æ˜¯ä»€ä¹ˆï¼Ÿ-ä»–å’ŒStandardsæ¨¡å¼æœ‰ä»€ä¹ˆåŒºåˆ«" class="headerlink" title="3ã€Quirks æ¨¡å¼ æ˜¯ä»€ä¹ˆï¼Ÿ ä»–å’ŒStandardsæ¨¡å¼æœ‰ä»€ä¹ˆåŒºåˆ«"></a>3ã€Quirks æ¨¡å¼ æ˜¯ä»€ä¹ˆï¼Ÿ ä»–å’ŒStandardsæ¨¡å¼æœ‰ä»€ä¹ˆåŒºåˆ«</h4><p>ä»IE6å¼€å§‹ï¼Œå¼•å…¥äº†Standardsæ¨¡å¼ï¼Œ æ ‡å‡†æ¨¡å¼ä¸­ï¼Œæµè§ˆå™¨å°è¯•ç»™ç¬¦åˆæ ‡å‡†çš„æ–‡æ¡£åœ¨è§„èŒƒä¸Šçš„æ­£ç¡®å¤„ç†è¾¾åˆ°åœ¨æŒ‡å®šæµè§ˆå™¨ä¸­çš„ç¨‹åº¦ã€‚</p><p>åœ¨IE6ä¹‹å‰ CSS è¿˜ä¸å¤Ÿæˆç†Ÿï¼Œ æ‰€ä»¥ IE5 ç­‰ä¹‹å‰çš„æµè§ˆå™¨ å¯¹ CSS çš„æ”¯æŒå¾ˆå·®ï¼Œ IE6å°†å¯¹CSSæä¾›æ›´å¥½çš„æ”¯æŒï¼Œç„¶è€Œè¿™æ—¶çš„é—®é¢˜æ¥äº†ï¼Œå› ä¸ºæœ‰å¾ˆå¤šé¡µé¢æ˜¯åŸºäºæ—§çš„å¸ƒå±€æ–¹å¼å†™çš„ï¼Œè€Œå¦‚æœIE6æ”¯æŒCSSåˆ™å°†ä»¤è¿™äº›é¡µé¢æ˜¾ç¤ºä¸æ­£å¸¸ï¼Œå¦‚æœåœ¨æ—¢ä¿è¯ä¸ç ´åç°æœ‰é¡µé¢ï¼Œæœ‰æä¾›æ–°çš„æ¸²æŸ“æœºåˆ¶å‘¢ï¼Ÿ</p><p>åœ¨å†™ç¨‹åºçš„æ—¶å€™æˆ‘ä»¬ä¹Ÿä¼šç»å¸¸é‡åˆ°è¿™æ ·çš„é—®é¢˜ï¼Œå¦‚ä½•ä¿è¯åŸæ¥çš„æ¥å£ä¸å˜ï¼Œæœ‰æä¾›æ›´å¼ºå¤§çš„åŠŸèƒ½ï¼Œå°¤å…¶æ˜¯æ–°åŠŸèƒ½ä¸å…¼å®¹æ—§åŠŸèƒ½çš„æ—¶å€™ã€‚ é‡åˆ°è¿™æ ·çš„é—®é¢˜æ˜¯ä¸€ä¸ªå¸¸è§çš„åšæ³•æ˜¯å¢åŠ å‚æ•°å’Œåˆ†æ”¯ï¼Œå³å½“æŸä¸ªå‚æ•°ä¸ºçœŸæ—¶ï¼Œæˆ‘ä»¬å°±ä½¿ç”¨æ–°åŠŸèƒ½ï¼Œè€Œå¦‚æœè¿™ä¸ªå‚æ•°ä¸ä¸ºçœŸæ—¶ï¼Œå°±æ˜¯ä½¿ç”¨æ—§åŠŸèƒ½ï¼Œè¿™æ ·å°±èƒ½ä¸ç ´ååŸæœ‰ç¨‹åºï¼Œåˆæä¾›æ–°åŠŸèƒ½ã€‚IEåˆ˜ä¹Ÿæ˜¯ç±»ä¼¼è¿™æ ·åšçš„ï¼Œå®ƒå°†DTDå½“æˆäº†è¿™ä¸ªå‚æ•°ï¼Œå°±æ„å‘³ç€è¿™ä¸ªé¡µé¢éƒ½å°†é‡‡ç”¨CSSæ”¯æŒæ›´å¥½çš„å¸ƒå±€ï¼Œè€Œå¦‚æœæ²¡æœ‰ï¼Œåˆ™å°†é‡‡ç”¨å…¼å®¹ä¹‹å‰çš„å¸ƒå±€æ–¹å¼ã€‚ è¿™å°±æ˜¯Quirksæ¨¡å¼ï¼ˆæ€ªç™–æ¨¡å¼ï¼Œè¯¡å¼‚æ¨¡å¼ï¼Œ æ€ªå¼‚æ¨¡å¼ï¼‰ã€‚</p><p>åŒºåˆ«ï¼š</p><p>æ€»ä½“ä¼šæœ‰å¸ƒå±€ã€ æ ·å¼è§£æå’Œè„šæœ¬æ‰§è¡Œè¿™ä¸‰æ–¹é¢çš„åŒºåˆ«ã€‚</p><p>ç›’æ¨¡å‹ï¼š</p><p>åœ¨W3Cæ ‡å‡†ä¸­ï¼Œå¦‚æœè®¾ç½®äº†ä¸€ä¸ªå…ƒç´ çš„å®½å’Œé«˜ï¼ŒæŒ‡çš„æ˜¯å…ƒç´ å†…å®¹çš„å®½åº¦å’Œé«˜åº¦ï¼Œè€Œåœ¨Quirksæ¨¡å¼ä¸‹ã€‚IEçš„å®½åº¦å’Œé«˜åº¦è¿˜åŒ…å«äº†paddingå’Œborderã€‚</p><p>è®¾ç½®è¡Œå†…å…ƒç´ çš„é«˜åº¦ï¼š</p><p>åœ¨Standards æ¨¡å¼ä¸‹ï¼Œç»™<span>ç­‰è¡Œå†…å…ƒç´ è®¾ç½®widthå’Œheightéƒ½ä¸ä¼šç”Ÿæ•ˆï¼Œè€Œåœ¨quirksæ¨¡å¼ä¸‹ï¼Œåˆ™ä¼šç”Ÿæ•ˆã€‚</span></p><p>è®¾ç½®ç™¾åˆ†æ¯”çš„é«˜åº¦ï¼šåœ¨standardsæ¨¡å¼ä¸‹ï¼Œ ä¸€ä¸ªå…ƒç´ çš„é«˜åº¦çŸ³æ²¹å…¶åŒ…å«çš„å…ƒç´ å†…å®¹æ¥å†³å®šçš„ï¼Œå¦‚æœçˆ¶å…ƒç´ æ²¡æœ‰è®¾ç½®ç™¾åˆ†æ¯”é«˜åº¦ï¼Œå­å…ƒç´ è®¾ç½®ä¸€ä¸ªç™¾åˆ†æ¯”é«˜åº¦æ˜¯æ— æ•ˆçš„ã€‚</p><p>marginï¼š0 autoè®¾ç½®æ°´å¹³å±…ä¸­ï¼šä½¿ç”¨margin:0 auto åœ¨standardsæ¨¡å¼ä¸‹ å¯ä»¥ä½¿å…ƒç´ æ°´å¹³å±…ä¸­ï¼Œä½†åœ¨quirks æ¨¡å¼ä¸‹ä¼šå¤±æ•ˆ</p><p>ï¼ˆè¿˜æœ‰å¾ˆå¤šï¼Œç­”å‡ºä»€ä¹ˆä¸é‡è¦ï¼Œå…³é”®æ˜¯çœ‹ä»–ç­”å‡ºçš„è¿™äº›æ˜¯ä¸æ˜¯è‡ªå·±ç»éªŒé‡åˆ°çš„ï¼Œè¿˜æ˜¯è¯´éƒ½æ˜¯çœ‹æ–‡ç« çœ‹çš„ï¼Œç”šè‡³å®Œå…¨ä¸çŸ¥é“ã€‚ï¼‰</p><h4 id="4ã€div-csså¸ƒå±€è¾ƒtableå¸ƒå±€æœ‰ä»€ä¹ˆä¼˜ç‚¹ï¼Ÿ"><a href="#4ã€div-csså¸ƒå±€è¾ƒtableå¸ƒå±€æœ‰ä»€ä¹ˆä¼˜ç‚¹ï¼Ÿ" class="headerlink" title="4ã€div+csså¸ƒå±€è¾ƒtableå¸ƒå±€æœ‰ä»€ä¹ˆä¼˜ç‚¹ï¼Ÿ"></a>4ã€div+csså¸ƒå±€è¾ƒtableå¸ƒå±€æœ‰ä»€ä¹ˆä¼˜ç‚¹ï¼Ÿ</h4><p>æ”¹ç‰ˆçš„æ—¶å€™æ›´æ–¹ä¾¿  æ˜¯è¦æ”¹cssæ–‡ä»¶ã€‚</p><p>é¡µé¢åŠ è½½çš„é€Ÿåº¦æ›´å¿«ã€ç»“æ„åŒ–æ¸…æ™°ã€é¡µé¢æ˜¾ç¤ºç®€æ´ã€‚</p><p>è¡¨ç°ä¸ç»“æ„ç›¸åˆ†ç¦»ï¼›</p><p>æ˜“äºä¼˜åŒ–ï¼ˆseoï¼‰æœç´¢å¼•æ“æ›´å‹å¥½ï¼Œæ’åæ›´é å‰ã€‚</p><h4 id="5ã€imgçš„alt-ä¸-title-æœ‰ä½•å¼‚åŒï¼Ÿ-strong-ä¸-em-çš„å¼‚åŒï¼Ÿ"><a href="#5ã€imgçš„alt-ä¸-title-æœ‰ä½•å¼‚åŒï¼Ÿ-strong-ä¸-em-çš„å¼‚åŒï¼Ÿ" class="headerlink" title="5ã€imgçš„alt ä¸ title æœ‰ä½•å¼‚åŒï¼Ÿ strong ä¸ em çš„å¼‚åŒï¼Ÿ"></a>5ã€imgçš„alt ä¸ title æœ‰ä½•å¼‚åŒï¼Ÿ strong ä¸ em çš„å¼‚åŒï¼Ÿ</h4><p>a: altï¼ˆalt textï¼‰ï¼š ä¸ºäº†èƒ½æ˜¾ç¤ºå›¾åƒã€çª—ä½“æˆ–appletsçš„ç”¨æˆ·ä»£ç†ï¼ˆUAï¼‰ï¼Œaltå±æ€§ç”¨æ¥æŒ‡å®šæ›¿æ¢çš„æ–‡å­—ã€‚</p><p>æ›¿æ¢æ–‡å­—çš„è¯­è¨€ç”¨langå±æ€§æ¥å†³å®šã€‚ï¼ˆåœ¨IEæµè§ˆå™¨ä¸‹ä¼šåœ¨æ²¡æœ‰titleæ—¶æŠŠ alt å½“æˆ tool tip æ˜¾ç¤ºï¼‰</p><p>titleï¼ˆtool tipï¼‰ï¼šè¯¥å±æ€§ä¸ºè®¾ç½®è¯¥å±æ€§çš„å…ƒç´ æä¾›å»ºè®®æ€§çš„ä¿¡æ¯ã€‚</p><p>strongï¼šç²—ä½“å¼ºè°ƒæ ‡ç­¾ï¼Œå¼ºè°ƒï¼Œè¡¨ç¤ºå†…å®¹çš„é‡è¦æ€§ï¼›</p><p>emï¼šæ–œä½“å¼ºè°ƒæ ‡ç­¾ï¼Œæ›´å¼ºçƒˆå¼ºè°ƒï¼Œè¡¨ç¤ºå†…å®¹å¼ºè°ƒç‚¹ï¼›</p><h4 id="6ã€ä½ èƒ½æè¿°ä¸€ä¸‹æ¸è¿›å¢å¼ºå’Œä¼˜é›…é™çº§ä¹‹é—´çš„ä¸åŒå—ï¼Ÿ"><a href="#6ã€ä½ èƒ½æè¿°ä¸€ä¸‹æ¸è¿›å¢å¼ºå’Œä¼˜é›…é™çº§ä¹‹é—´çš„ä¸åŒå—ï¼Ÿ" class="headerlink" title="6ã€ä½ èƒ½æè¿°ä¸€ä¸‹æ¸è¿›å¢å¼ºå’Œä¼˜é›…é™çº§ä¹‹é—´çš„ä¸åŒå—ï¼Ÿ"></a>6ã€ä½ èƒ½æè¿°ä¸€ä¸‹æ¸è¿›å¢å¼ºå’Œä¼˜é›…é™çº§ä¹‹é—´çš„ä¸åŒå—ï¼Ÿ</h4><p><strong>æ¸è¿›å¢å¼º</strong>ï¼š progressive enhancementï¼šé’ˆå¯¹ä½ç‰ˆæœ¬æµè§ˆå™¨è¿›è¡Œæ„å»ºé¡µé¢ï¼Œä¿è¯æœ€åŸºæœ¬çš„åŠŸèƒ½ï¼Œç„¶ååœ¨é’ˆå¯¹é«˜çº§æµè§ˆå™¨è¿›è¡Œæ•ˆæœã€äº¤äº’ç­‰æ”¹è¿›å’Œè¿½åŠ åŠŸèƒ½è¾¾åˆ°æ›´å¥½çš„ç”¨æˆ·ä½“éªŒã€‚</p><p><strong>ä¼˜é›…é™çº§</strong>ï¼šgraceful degradation ï¼š ä¸€å¼€å§‹å°±æ„å»ºå®Œæ•´çš„åŠŸèƒ½ï¼Œç„¶åå†é’ˆå¯¹ä½ç‰ˆæœ¬çš„æµè§ˆå™¨è¿›è¡Œå…¼å®¹ã€‚</p><p><strong>åŒºåˆ«ï¼š</strong>ä¼˜é›…é™çº§æ˜¯ä»å¤æ‚çš„ç°çŠ¶å¼€å§‹çš„ï¼Œå¹¶è¯•å›¾å‡å°‘ç”¨æˆ·ä½“éªŒçš„ä¾›ç»™ï¼Œè€Œæ¸è¿›å¢å¼ºåˆ™æ˜¯ä»ä¸€ä¸ªéå¸¸åŸºç¡€çš„ï¼Œèƒ½å¤Ÿèµ·ä½œç”¨çš„ç‰ˆæœ¬å¼€å§‹ï¼Œå¹¶ä¸æ–­æ‰©å……ï¼Œä»¥é€‚åº”æœªæ¥ç¯å¢ƒçš„éœ€è¦ã€‚é™çº§ï¼ˆåŠŸèƒ½è¡°å‡ï¼‰æ„å‘³ç€å¾€å›çœ‹ï¼›è€Œæ¸è¿›å¢å¼ºåˆ™æ„å‘³ç€æœå‰çœ‹ï¼ŒåŒæ—¶ä¿è¯å…¶æ ¹åŸºå¤„äºå®‰å…¨åœ°å¸¦ã€‚</p><p><strong>ä¼˜é›…é™çº§</strong>è§‚ç‚¹</p><p>ä¼˜é›…é™çº§è§‚ç‚¹è®¤ä¸ºåº”è¯¥é’ˆå¯¹é‚£äº›æœ€é«˜çº§ã€æœ€å®Œå–„çš„æµè§ˆå™¨æ¥è®¾è®¡ç½‘ç«™ã€‚è€Œå°†é‚£äº›è¢«è®¤ä¸ºè¿‡æ—¶ æˆ–æœ‰åŠŸèƒ½ç¼ºå¤±çš„æµè§ˆå™¨ä¸‹çš„æµ‹è¯•å®‰æ’åœ¨å¼€å‘å‘¨æœŸçš„æœ€åé˜¶æ®µï¼Œå¹¶æŠŠæµ‹è¯•å¯¹è±¡é™å®šä¸ºä¸»æµæµè§ˆå™¨ ï¼ˆå¦‚IEã€Mozillaç­‰ï¼‰çš„å‰ä¸€ä¸ªç‰ˆæœ¬ã€‚</p><p>åœ¨è¿™ç§è®¾è®¡è§„èŒƒä¸‹ï¼Œæ—§ç‰ˆæœ¬çš„æµè§ˆå™¨è¢«è®¤ä¸ºä»…èƒ½æä¾›â€œç®€é™‹å´æ— å¦¨ï¼ˆpoor ï¼Œbut passableï¼‰â€çš„æµè§ˆä½“éªŒã€‚ä½ å¯ä»¥åšä¸€äº›å°çš„è°ƒæ•´æ¥é€‚åº”æŸä¸ªç‰¹å®šçš„æµè§ˆå™¨ã€‚ä½†ç”±äºä»–ä»¬å¹¶éæˆ‘ä»¬æ‰€å…³æ³¨çš„ç„¦ç‚¹ï¼Œå› æ­¤é™¤äº†ä¿®å¤è¾ƒå¤§çš„é”™è¯¯ä¹‹å¤–ï¼Œå…¶ä»–çš„å·®å¼‚å°†è¢«ç›´æ¥å¿½ç•¥ã€‚</p><p><strong>æ¸è¿›å¢å¼º</strong>è§‚ç‚¹</p><p>æ¸è¿›å¢å¼ºè§‚ç‚¹åˆ™è®¤ä¸ºåº”å…³æ³¨å†…å®¹æœ¬èº«ã€‚</p><p>å†…å®¹ä½¿æˆ‘ä»¬åˆ›å»ºç½‘ç«™çš„è¯±å› ã€‚æœ‰çš„ç½‘ç«™å±•ç¤ºå®ƒï¼Œæœ‰çš„ç½‘ç«™æ”¶é›†ä»–ï¼Œæœ‰çš„å¯»æ±‚ï¼Œæœ‰çš„æ“ä½œï¼Œè¿˜æœ‰çš„ç½‘ç«™ç”šè‡³ä¼šåŒ…å«ä»¥ä¸Šçš„ç§ç§ï¼Œä½†ç›¸åŒç‚¹æ˜¯å®ƒä»¬å…¨éƒ½æ¶‰åŠåˆ°å†…å®¹ã€‚è¿™ä½¿å¾—â€œæ¸è¿›å¢å¼ºâ€æˆä¸ºä¸€ç§æ›´ä¸ºåˆç†çš„è®¾è®¡èŒƒä¾‹ã€‚è¿™ä¹Ÿæ˜¯å®ƒç«‹å³è¢« Yahoo! æ‰€é‡‡çº³å¹¶ç”¨ä»¥æ„å»ºå…¶â€œåˆ†çº§å¼æµè§ˆå™¨æ”¯æŒ (Graded Browser Support)â€ç­–ç•¥çš„åŸå› æ‰€åœ¨ã€‚</p><p>é‚£ä¹ˆé—®é¢˜æ¥äº†ã€‚ç°åœ¨äº§å“ç»ç†çœ‹åˆ°IE6,7,8ç½‘é¡µæ•ˆæœç›¸å¯¹é«˜ç‰ˆæœ¬ç°ä»£æµè§ˆå™¨å°‘äº†å¾ˆå¤šåœ†è§’ï¼Œé˜´å½±ï¼ˆCSS3ï¼‰ï¼Œè¦æ±‚å…¼å®¹ï¼ˆä½¿ç”¨å›¾ç‰‡èƒŒæ™¯ï¼Œæ”¾å¼ƒCSS3ï¼‰ï¼Œä½ ä¼šå¦‚ä½•è¯´æœä»–ï¼Ÿ</p><h4 id="7ã€ä¸ºä»€ä¹ˆåˆ©ç”¨å¤šä¸ªåŸŸåæ¥å­˜å‚¨ç½‘ç«™èµ„æºä¼šæ›´æœ‰æ•ˆï¼Ÿ"><a href="#7ã€ä¸ºä»€ä¹ˆåˆ©ç”¨å¤šä¸ªåŸŸåæ¥å­˜å‚¨ç½‘ç«™èµ„æºä¼šæ›´æœ‰æ•ˆï¼Ÿ" class="headerlink" title="7ã€ä¸ºä»€ä¹ˆåˆ©ç”¨å¤šä¸ªåŸŸåæ¥å­˜å‚¨ç½‘ç«™èµ„æºä¼šæ›´æœ‰æ•ˆï¼Ÿ"></a>7ã€ä¸ºä»€ä¹ˆåˆ©ç”¨å¤šä¸ªåŸŸåæ¥å­˜å‚¨ç½‘ç«™èµ„æºä¼šæ›´æœ‰æ•ˆï¼Ÿ</h4><p>CDNç¼“å­˜æ›´æ–¹ä¾¿</p><p>çªç ´æµè§ˆå™¨å¹¶å‘é™åˆ¶</p><p>èŠ‚çº¦cookieå¸¦å®½</p><p>èŠ‚çº¦ä¸»åŸŸåçš„è¿æ¥æ•°ï¼Œä¼˜åŒ–é¡µé¢å“åº”é€Ÿåº¦</p><p>é˜²æ­¢ä¸å¿…è¦çš„å®‰å…¨é—®é¢˜</p><h4 id="8ã€è¯·è°ˆä¸€ä¸‹ä½ å¯¹ç½‘é¡µæ ‡å‡†å’Œæ ‡å‡†å®šä¹‰æœºæ„é‡è¦æ€§çš„ç†è§£ã€‚"><a href="#8ã€è¯·è°ˆä¸€ä¸‹ä½ å¯¹ç½‘é¡µæ ‡å‡†å’Œæ ‡å‡†å®šä¹‰æœºæ„é‡è¦æ€§çš„ç†è§£ã€‚" class="headerlink" title="8ã€è¯·è°ˆä¸€ä¸‹ä½ å¯¹ç½‘é¡µæ ‡å‡†å’Œæ ‡å‡†å®šä¹‰æœºæ„é‡è¦æ€§çš„ç†è§£ã€‚"></a>8ã€è¯·è°ˆä¸€ä¸‹ä½ å¯¹ç½‘é¡µæ ‡å‡†å’Œæ ‡å‡†å®šä¹‰æœºæ„é‡è¦æ€§çš„ç†è§£ã€‚</h4><p>ç½‘é¡µæ ‡å‡†å’Œæ ‡å‡†å®šåˆ¶æœºæ„éƒ½æ˜¯ä¸ºäº†è®©webå‘å±•çš„æ›´å¥åº·ï¼Œå¼€å‘è€…éµå¾ªç»Ÿä¸€çš„æ ‡å‡†ï¼Œé™ä½å¼€å‘éš¾åº¦ï¼Œå¼€å‘æˆæœ¬ï¼ŒSEOä¹Ÿä¼šæ›´å¥½åšï¼Œä¹Ÿä¸ä¼šå› ä¸ºæ»¥ç”¨ä»£ç è€Œå¯¼è‡´å„ç§BUGã€å®‰å…¨é—®é¢˜ï¼Œæœ€ç»ˆæé«˜ç½‘ç«™çš„æ˜“ç”¨æ€§ã€‚</p><h4 id="9ã€è¯·ä½ æè¿°ä¸€ä¸‹cookiesï¼ŒsessionStorageå’ŒlocalStorageçš„-åŒºåˆ«"><a href="#9ã€è¯·ä½ æè¿°ä¸€ä¸‹cookiesï¼ŒsessionStorageå’ŒlocalStorageçš„-åŒºåˆ«" class="headerlink" title="9ã€è¯·ä½ æè¿°ä¸€ä¸‹cookiesï¼ŒsessionStorageå’ŒlocalStorageçš„    åŒºåˆ«"></a>9ã€è¯·ä½ æè¿°ä¸€ä¸‹cookiesï¼ŒsessionStorageå’ŒlocalStorageçš„    åŒºåˆ«</h4><p>sessionStorage ç”¨äºæœ¬åœ°å­˜å‚¨ä¸€ä¸ªä¼šè¯ï¼ˆsessionï¼‰ä¸­çš„æ•°æ®ï¼Œè¿™äº›æ•°æ®åªæœ‰åœ¨åŒä¸€ä¸ªä¼šè¯ä¸­çš„é¡µé¢æ‰èƒ½è®¿é—®å¹¶ä¸”å½“ä¼šè¯ç»“æŸåä¹Ÿéšä¹‹é”€æ¯ã€‚å› æ­¤sessionStorageä¸æ˜¯ä¸€ç§æŒä¹…åŒ–çš„æœ¬åœ°å­˜å‚¨ï¼Œä»…ä»…æ˜¯ä¼šè¯çº§åˆ«çš„å­˜å‚¨ã€‚è€ŒlocalStorageç”¨äºæŒä¹…åŒ–çš„æœ¬åœ°å­˜å‚¨ï¼Œé™¤éä¸»åŠ¨å»åˆ é™¤æ•°æ®ï¼Œå¦åˆ™æ•°æ®æ˜¯æ°¸è¿œä¸ä¼šè¿‡æœŸçš„ã€‚</p><p>web storage å’Œ cookie çš„åŒºåˆ«</p><p>web storage çš„æ¦‚å¿µå’Œ cookie ç›¸ä¼¼ï¼ŒåŒºåˆ«æ˜¯å®ƒæ˜¯ä¸ºäº†æ›´å¤§å®¹é‡å­˜å‚¨è®¾è®¡çš„ã€‚cookieçš„å¤§å°æ˜¯å—é™åˆ¶çš„ï¼Œè€Œä¸”æ²¡åˆºæ¿€ä½ è¯·æ±‚ä¸€ä¸ªæ–°çš„é¡µé¢çš„æ—¶å€™cookieéƒ½ä¼šè¢«å‘é€è¿‡å»ï¼Œè¿™æ ·æ— å½¢ä¸­æµªè´¹äº†å¸¦å®½ï¼Œå¦å¤–cookieè¿˜éœ€è¦æŒ‡å®šä½œç”¨åŸŸï¼Œä¸å¯è·¨åŸŸè°ƒç”¨ã€‚</p><p>é™¤æ­¤ä¹‹å¤–ï¼Œwebstorageæ‹¥æœ‰setitemï¼Œgetitemï¼Œremoveitemï¼Œclearç­‰æ–¹æ³•ï¼Œ ä¸åƒcookieéœ€è¦å‰ç«¯å¼€å‘è€…è‡ªå·±å°è£…setCookieï¼ŒgetCookieã€‚ä½†æ˜¯Cookieä¹Ÿæ˜¯ä¸å¯æˆ–ç¼ºçš„ï¼šCookieçš„ä½œç”¨æ˜¯ä¸æœåŠ¡å™¨è¿›è¡Œäº¤äº’ï¼Œä½œä¸ºHTTPè§„èŒƒçš„ä¸€éƒ¨åˆ†è€Œå­˜åœ¨ï¼Œ è€ŒWeb Storageä»…ä»…æ˜¯ä¸ºäº†æœ¬åœ°å­˜å‚¨æ•°æ®è€Œç”Ÿçš„ã€‚</p><h4 id="10ã€ç®€è¿°ä¸‹srcå’Œhrefçš„åŒºåˆ«"><a href="#10ã€ç®€è¿°ä¸‹srcå’Œhrefçš„åŒºåˆ«" class="headerlink" title="10ã€ç®€è¿°ä¸‹srcå’Œhrefçš„åŒºåˆ«"></a>10ã€ç®€è¿°ä¸‹srcå’Œhrefçš„åŒºåˆ«</h4><p>srcç”¨äºæ›¿æ¢å½“å‰å…ƒç´ ï¼Œhrefç”¨äºåœ¨å½“å‰æ–‡æ¡£å¼•ç”¨èµ„æºä¹‹é—´ç¡®è®¤è”ç³»ã€‚</p><p>srcæ˜¯ source çš„ç¼©å†™ï¼Œ æŒ‡å‘å¤–éƒ¨èµ„æºçš„ä½ç½®ï¼Œ æŒ‡å‘çš„å†…å®¹å°†ä¼šåµŒå…¥åˆ°æ–‡æ¡£ä¸­ä½†é’±æ ‡ç­¾æ‰€åœ¨çš„ä½ç½®ï¼Œåœ¨è¯·æ±‚srcèµ„æºæ—¶ä¼šå°†å…¶æŒ‡å‘çš„èµ„æºä¸‹è½½å¹¶åº”ç”¨åˆ°æ–‡æ¡£å†…ï¼Œä¾‹å¦‚jsè„šæœ¬ï¼Œimgå›¾ç‰‡å’Œframeç­‰å…ƒç´ ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;script src = &quot;js.js&quot;&gt; &lt;/script&gt;</span><br></pre></td></tr></table></figure><p>å½“æµè§ˆå™¨è§£æåˆ°è¯¥å…ƒç´ æ—¶ï¼Œä¼šæš‚åœå…¶å®ƒèµ„æºçš„ä¸‹è½½å’Œå¤„ç†ï¼Œç›´åˆ°å°†è¯¥å…ƒç´ èµ„æºåŠ è½½ã€ç¼–è¯‘ã€æ‰§è¡Œå®Œæ¯•ï¼Œå›¾ç‰‡å’Œæ¡†æ¶ç­‰å…ƒç´ ä¹Ÿæ˜¯å¦‚æ­¤ï¼Œç±»ä¼¼äºå°†æ‰€æŒ‡å‘èµ„æºåµŒå…¥å½“å‰æ ‡ç­¾å†…ã€‚è¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆå°†jsè„šæœ¬æ”¾åœ¨åº•éƒ¨è€Œä¸æ˜¯å¤´éƒ¨ã€‚</p><p>hrefæ˜¯Hypertextçš„ç¼©å†™ referenceçš„ç¼©å†™ï¼Œ æŒ‡å‘ç½‘ç»œèµ„æºæ‰€åœ¨çš„ä½ç½®ï¼Œå»ºç«‹å’Œå½“å‰å…ƒç´ ï¼ˆé”šç‚¹ï¼‰æˆ–å½“å‰æ–‡æ¡£ï¼ˆé“¾æ¥ï¼‰ä¹‹é—´çš„é“¾æ¥ï¼Œå¦‚æœæˆ‘ä»¬åœ¨æ–‡æ¡£ä¸­æ·»åŠ </p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;link href= &quot;common.css&quot; rel=&quot;stylesheet&quot; /&gt;</span><br></pre></td></tr></table></figure><p>nameæµè§ˆå™¨ä¼šè¯†åˆ«è¯¥æ–‡æ¡£ä¸ºcssæ–‡ä»¶ï¼Œå°±ä¼šå¹¶è¡Œä¸‹è½½èµ„æºå¹¶ä¸”ä¸ä¼šåœæ­¢å½“å‰æ–‡æ¡£çš„å¤„ç†ã€‚è¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆå»ºè®®ç”¨linkæ–¹å¼åŠ è½½cssï¼Œè€Œä¸æ˜¯ä½¿ç”¨@importæ–¹å¼ã€‚</p><h4 id="11ã€çŸ¥é“çš„ç½‘é¡µåˆ¶ä½œç”¨åˆ°çš„å›¾ç‰‡æ ¼å¼éƒ½æœ‰å“ªäº›"><a href="#11ã€çŸ¥é“çš„ç½‘é¡µåˆ¶ä½œç”¨åˆ°çš„å›¾ç‰‡æ ¼å¼éƒ½æœ‰å“ªäº›" class="headerlink" title="11ã€çŸ¥é“çš„ç½‘é¡µåˆ¶ä½œç”¨åˆ°çš„å›¾ç‰‡æ ¼å¼éƒ½æœ‰å“ªäº›"></a>11ã€çŸ¥é“çš„ç½‘é¡µåˆ¶ä½œç”¨åˆ°çš„å›¾ç‰‡æ ¼å¼éƒ½æœ‰å“ªäº›</h4><p>png-8ï¼Œpng-24ï¼Œjpegï¼Œgifï¼Œsvgã€‚</p><p>Webp</p><p>Webpï¼šWebpæ ¼å¼ï¼Œè°·æ­Œï¼ˆgoogleï¼‰å¼€å‘çš„ä¸€ç§</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h4 id=&quot;1ã€ä½ åšçš„é¡µé¢åœ¨é‚£äº›æµè§ˆå™¨æµ‹è¯•è¿‡ï¼Ÿè¿™äº›æµè§ˆå™¨çš„å†…æ ¸åˆ†åˆ«æ˜¯ä»€ä¹ˆï¼Ÿ&quot;&gt;&lt;a href=&quot;#1ã€ä½ åšçš„é¡µé¢åœ¨é‚£äº›æµè§ˆå™¨æµ‹è¯•è¿‡ï¼Ÿè¿™äº›æµè§ˆå™¨çš„å†…æ ¸åˆ†åˆ«æ˜¯ä»€ä¹ˆï¼Ÿ&quot; class=&quot;headerlink&quot; title=&quot;1ã€ä½ åšçš„é¡µé¢åœ¨é‚£äº›æµè§ˆå™¨æµ‹è¯•è¿‡ï¼Ÿè¿™äº›æµè§ˆå™¨çš„å†…æ ¸åˆ†åˆ«æ˜¯ä»€ä¹ˆ
      
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>å¤œã€è¤ç«è™«å’Œä½ </title>
    <link href="https://tianjiec.top/2018/12/14/%E5%A4%9C%E3%80%81%E8%90%A4%E7%81%AB%E8%99%AB%E5%92%8C%E4%BD%A0/"/>
    <id>https://tianjiec.top/2018/12/14/å¤œã€è¤ç«è™«å’Œä½ /</id>
    <published>2018-12-14T12:51:36.000Z</published>
    <updated>2018-12-14T13:06:22.092Z</updated>
    
    <content type="html"><![CDATA[<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">audio</span> <span class="attr">src</span>=<span class="string">"éŸ³ä¹/å¤œã€è¤ç«è™«å’Œä½ .mp3"</span> <span class="attr">controls</span>=<span class="string">"controls"</span>  <span class="attr">autoplay</span> <span class="attr">preload</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">audio</span>&gt;</span></span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;figure class=&quot;highlight html&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;
      
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>18/11/7</title>
    <link href="https://tianjiec.top/2018/11/07/18-11-7/"/>
    <id>https://tianjiec.top/2018/11/07/18-11-7/</id>
    <published>2018-11-07T03:48:52.000Z</published>
    <updated>2018-11-07T04:52:38.330Z</updated>
    
    <content type="html"><![CDATA[<p>æ¯å½“æˆ‘æƒ³å¥½å¥½å­¦ä¹ <br>æ€»æœ‰äººå’Œæˆ‘è¯´å›å»ç¡å§åˆ«å­¦äº†<figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="http://qzonestyle.gtimg.cn/qzone/em/e295.gif" alt="img" title="">                </div>                <div class="image-caption">img</div>            </figure><br>ä»Šå¤©åˆæ˜¯çˆ±æˆ‘ç†™å“¥çš„ä¸€å¤©</p><p><img src="http://p1lzepiq0.bkt.clouddn.com/%E7%BD%97%E4%BA%91%E7%86%99.jpg" width="280px" height="400px"></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;æ¯å½“æˆ‘æƒ³å¥½å¥½å­¦ä¹ &lt;br&gt;æ€»æœ‰äººå’Œæˆ‘è¯´å›å»ç¡å§åˆ«å­¦äº†&lt;figure class=&quot;image-bubble&quot;&gt;
                &lt;div class=&quot;img-lightbox&quot;&gt;
                    &lt;div class=&quot;overlay
      
    
    </summary>
    
    
  </entry>
  
</feed>
